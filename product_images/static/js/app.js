webpackJsonp([1],{CNxa:function(t,e,i){var n=i("cqsg");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i("rjj0")("79780754",n,!0)},Cf1p:function(t,e,i){"use strict";var n=i("Dd8w"),o=i.n(n),s=i("woOf"),l=i.n(s),r=i("BO1k"),a=i.n(r);e.a={methods:{getTextLine:function(t,e,i){if(!e&&0!==e)return null;for(var n=(""+e).split(""),o="",s=[],l=0;l<n.length;l+=1)t.measureText(o).width>=i-20&&(s.push(o),o=""),o+=n[l];return s.push(o),s},getCellAt:function(t,e){var i=!0,n=!1,s=void 0;try{for(var r,h=a()(this.displayCells);!(i=(r=h.next()).done);i=!0){var d=r.value,c=!0,f=!1,u=void 0;try{for(var x,p=a()(d);!(c=(x=p.next()).done);c=!0){var v=x.value;if(t>=v.x&&e>=v.y&&t<=v.x+v.width&&e<=v.y+v.height)return l()({},v,{offset:o()({},this.offset)})}}catch(t){f=!0,u=t}finally{try{!c&&p.return&&p.return()}finally{if(f)throw u}}}}catch(t){n=!0,s=t}finally{try{!i&&h.return&&h.return()}finally{if(n)throw s}}return null},getCheckboxAt:function(t,e){var i=!0,n=!1,o=void 0;try{for(var s,r=a()(this.checkboxs);!(i=(s=r.next()).done);i=!0){var h=s.value;if(t>=h.x&&e>=h.y&&t<=h.x+h.width&&e<=h.y+h.height)return l()({},h)}}catch(t){n=!0,o=t}finally{try{!i&&r.return&&r.return()}finally{if(n)throw o}}return null},getButtonAt:function(t,e){var i=!0,n=!1,o=void 0;try{for(var s,r=a()(this.renderButtons);!(i=(s=r.next()).done);i=!0){var h=s.value;if(t>=h.x&&e>=h.y&&t<=h.x+h.width&&e<=h.y+h.height)return l()({},h)}}catch(t){n=!0,o=t}finally{try{!i&&r.return&&r.return()}finally{if(n)throw o}}return null},getHeadWord:function(t,e){if(e>this.toolbarHeight-this.rowHeight&&e<this.toolbarHeight){var i=!0,n=!1,o=void 0;try{for(var s,r=a()(this.displayColumns);!(i=(s=r.next()).done);i=!0){var h=s.value;if(t>h.x&&t<h.x+h.width)return l()({},h)}}catch(t){n=!0,o=t}finally{try{!i&&r.return&&r.return()}finally{if(n)throw o}}}return null},getCellsBySelect:function(t){for(var e=[],i=t.rowIndex;i<t.rowIndex+t.rowCount;i+=1){for(var n=this.allCells[i],o=[],s=0,l=1/0,r=0;r<n.length;r+=1){if(t.cellIndex===r&&(l=s+t.width),s<l&&r>=t.cellIndex)o.push(n[r]);else if(s>l)break;s+=n[r].width+this.fillWidth}e.push(o)}return e},getCellByRowAndKey:function(t,e){var i=this.allCells[t],n=!0,o=!1,s=void 0;try{for(var l,r=a()(i);!(n=(l=r.next()).done);n=!0){var h=l.value;if(h.key===e)return h}}catch(t){o=!0,s=t}finally{try{!n&&r.return&&r.return()}finally{if(o)throw s}}return null},showInput:function(t,e,i,n){this.isEditing=!0,this.inputStyles={position:"absolute",top:e-1+"px",left:t-1+"px",minWidth:i+2+"px",maxWidth:(this.maxPoint.x-t>300?300:this.maxPoint.x-t)+"px",minHeight:n+2+"px"}},hideInput:function(){this.isEditing=!1,this.inputStyles={top:"-10000px",left:"-10000px"}},showTipMessage:function(t){var e=this;this.tipMessage=t,this.showTip=!0,setTimeout(function(){e.showTip=!1},2e3)},evalUtil:function(t){var e=t.replace("=","").replace(/ /gi,"").toUpperCase(),i=e.split("&"),n=[],o=!0,s=!1,l=void 0;try{for(var r,h=a()(i);!(o=(r=h.next()).done);o=!0){var d=r.value,c="",f=d,u=[];if(-1!==d.indexOf("=>")){var x=d.split("=>")[0];f=d.split("=>")[1];if(!/^(include)?\(.+\)|(exclude|!)\(.+\)$/i.test(x))throw new Error("区域表达式非法");var p=x.match(/\(.+\)/)[0].replace("(","").replace(")","").split(","),v=!0,y=!1,_=void 0;try{for(var g,m=a()(p);!(v=(g=m.next()).done);v=!0){var w=g.value;if(-1!==w.indexOf("-")){var b=w.split("-");if(2!==b.length)throw new Error("区域表达式非法");if(!isNaN(b[0])&&!isNaN(b[1])&&parseInt(b[0],10)>0&&parseInt(b[0],10)<parseInt(b[1],10))for(var C=b[0]-1;C<b[1];C+=1)u.push(C)}else{if(isNaN(w))throw new Error("区域表达式非法");u.push(parseInt(w,10)-1)}}}catch(t){y=!0,_=t}finally{try{!v&&m.return&&m.return()}finally{if(y)throw _}}/^(include)?\(.+\)$/i.test(x)?c="include":/^(exclude|!)\(.+\)$/i.test(x)&&(c="exclude")}if(f){var k=0,I=!0,A=!1,P=void 0;try{for(var B,T=a()(this.words);!(I=(B=T.next()).done);I=!0){var D=B.value;-1!==f.indexOf(D)&&(f=f.replace(new RegExp(D,"gi"),"this.allCells[$x$]["+k+"].content")),k+=1}}catch(t){A=!0,P=t}finally{try{!I&&T.return&&T.return()}finally{if(A)throw P}}}n.push({equation:f,indexArray:u,regionType:c})}}catch(t){s=!0,l=t}finally{try{!o&&h.return&&h.return()}finally{if(s)throw l}}return n}}}},NHnr:function(t,e,i){"use strict";function n(t){i("xk8O")}function o(t){i("ddql")}function s(t){return{id:0,value:t||"",component:"text-input",record:{}}}function l(){var t=document.getElementById("product_items");K.a.create(t,{ghostClass:"ghost",group:"foo",animation:150,onUpdate:function(t){t.item.remove(),t.from.insertBefore(t.item,U(t.from).find(".editor-item").get(t.oldIndex)),$.items.splice(t.newIndex,0,$.items.splice(t.oldIndex,1)[0])}})}function r(t){return{id:0,value:"",component:"image-input",file:t,record:{}}}function a(t){return{id:0,record:{value:t.value||"",model_id:0,model:t.model,domain:t.domain,name:t.name,placeholder:t.placeholder},component:"many2one-input"}}function h(t){var e=U('.editor-item[data-index="'+t+'"]').next();e.length>0&&(e.find("textarea, input").length>0?e.find("textarea, input").focus():h(t+1))}function d(t){var e=U('li[data-index="'+t+'"]').prev();e.length>0&&(e.find("textarea, input").length>0?e.find("textarea, input").focus():d(t-1))}function c(t){i("i2s9")}function f(t){return{id:0,value:t||"",component:"text-input",record:{}}}function u(){var t=document.getElementById("image_items");K.a.create(t,{ghostClass:"ghost",group:"foo",animation:150,onUpdate:function(t){t.item.remove(),t.from.insertBefore(t.item,et(t.from).find(".editor-item").get(t.oldIndex)),it.items.splice(t.newIndex,0,it.items.splice(t.oldIndex,1)[0])}})}function x(t){return{id:0,value:"",component:"image-input",file:t,record:{}}}function p(t){var e=et('.editor-item[data-index="'+t+'"]').next();e.length>0&&(e.find("textarea, input").length>0?e.find("textarea, input").focus():p(t+1))}function v(t){var e=et('li[data-index="'+t+'"]').prev();e.length>0&&(e.find("textarea, input").length>0?e.find("textarea, input").focus():v(t-1))}function y(t){i("TDAC")}function _(t){i("CNxa")}Object.defineProperty(e,"__esModule",{value:!0});var g=i("7+uW"),m=i("mvHQ"),w=i.n(m),b={props:["model","index"],methods:{enter_input:function(t){if(t.shiftKey){t.preventDefault();(new g.a).$emit("add-text",this.index)}},next_textarea:function(t){if(t.shiftKey){t.preventDefault();(new g.a).$emit("next-textarea",this.index)}},prev_textarea:function(t){if(t.shiftKey){t.preventDefault();(new g.a).$emit("prev-textarea",this.index)}},input_change:function(t){(new g.a).$emit("text-input-change",this.index)}}},C=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"text-input"},[i("div",{staticClass:"expandingArea "},[i("pre",[i("span",[t._v(t._s(t.model.value))]),i("br")]),t._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.model.value,expression:"model.value"}],attrs:{placeholder:"输入描述内容"},domProps:{value:t.model.value},on:{input:[function(e){e.target.composing||t.$set(t.model,"value",e.target.value)},function(e){e.preventDefault(),t.input_change(e)}],keydown:[function(e){if(!("button"in e)&&t._k(e.keyCode,"down",40,e.key))return null;t.next_textarea(e)},function(e){if(!("button"in e)&&t._k(e.keyCode,"up",38,e.key))return null;t.prev_textarea(e)},function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.enter_input(e)}]}})])])},k=[],I={render:C,staticRenderFns:k},A=I,P=i("VU/8"),B=n,T=P(b,A,!1,B,null,null),D=T.exports,R={props:["model","product_id","id"],data:function(){return{loaded:!1,imageWidth:250,imageHeight:200,mask_height:0}},created:function(){if(!this.model.value){if(["image/png","image/jpeg","image/gif"].indexOf(this.model.file.type)<0)return;var t=this,e=new FileReader;if(e.onload=function(e){t.model.value=e.target.result},e.readAsDataURL(this.model.file),0===t.model.id){var i=new FormData;i.append("file",this.model.file),i.append("image_url",this.model.value),i.append("product_id",this.product_id),i.append("index",this.model.index),this.product_id&&t.$http.post("/images/add",i,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){"error"===e.data.code?alert(e.data):(console.log(e.data.result.image_id),t.id=e.data.result.image_id,t.$emit("addId",e.data.result.image_id,t.model.index))})}}},events:{preview_picture:function(t){this.imageWidth=t?50:250}},methods:{real_get_url:function(t,e){return"jd"===e?"http://img13.360buyimg.com/n0/"+t:t},load:function(t){this.loaded=!0}}},E=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"image-input"},[i("img",{staticStyle:{width:"250px",height:"250px"},attrs:{src:t.real_get_url(t.model.value,t.model.type)},on:{load:t.load}}),t._v(" "),t.loaded?t._e():i("div",{staticClass:"image-input-mask-container"},[i("span",{staticClass:"image-input-mask"})])])},S=[],W={render:E,staticRenderFns:S},F=W,M=i("VU/8"),O=o,z=M(R,F,!1,O,null,null),H=z.exports,L=i("Lokx"),K=i.n(L),U=i("7t+N"),$={loading_index:0,items:[{value:"",component:"text-input",record:{}}],operators:[{method:"plus",operator_icon:"operator_icon_plus"},{method:"delete",operator_icon:"operator_icon_delete"}],is_display_many2one_choose:!1,display_operator_choose:-1,dragging:!1,choose_index:-1,loading:!1,delete_items:[],is_display_device:!0,is_fullscreen:!1,original_height:0,is_preview:!1,is_save:!1},N={props:["config"],name:"editor",mounted:function(){l.bind(this)()},data:function(){return $},events:{"add-text":function(t){this.items.splice(t+1,0,s("")),g.a.nextTick(function(){h(t)})},"next-textarea":h,"prev-textarea":d,"text-input-change":function(){this.is_save=!1,(new g.a).$emit("text-input-change")}},components:{Sortable:K.a,"text-input":D,"image-input":H},computed:{many2one_choose:function(){return this.config.many2one||[]}},created:function(){this.get()},methods:{choose_leave:function(){this.is_display_many2one_choose&&(this.is_display_many2one_choose=!1)},choose_over:function(){this.is_display_many2one_choose||(this.is_display_many2one_choose=!0)},display_device:function(){this.is_display_device=!this.is_display_device},get:function(){var t=this,e=t.config.getFunc||function(){return U.when(U.post(t.config.get_url||"/editor/get",{editor_id:t.config.osv.editor_id,osv_info:w()(t.config.osv)}))},i=t.config.getDone||function(e){e=JSON.parse(e),e.forEach(function(t){"many2one-input"===t.component&&(t.record=JSON.parse(t.value))}),t.items=e,t.loading=!1};this.loading_more(e).then(i)},do_many2one_choose:function(t){var e=this;e.is_display_many2one_choose=!1,e.items.push(a(t)),g.a.nextTick(function(){h(e.items.length-2)})},newRecord:function(){var t=this;t.is_display_many2one_choose=!1,t.items.push(s()),g.a.nextTick(function(){h(t.items.length-2)})},save:function(){var t=this,e=this.config.saveFunc||function(){var e=new FormData;e.append("osv_info",w()(this.config.osv)),e.append("editor_id",this.config.osv.editor_id),e.append("delete_items",w()(this.delete_items));for(var i in t.items){var n=t.items[i];"image-input"===n.component?(e.append(i,n.file||""),e.append(i+"-id",w()({id:n.id}))):"text-input"===n.component?e.append(i,w()({id:n.id,value:n.value,component:n.component})):"many2one-input"===n.component&&e.append(i,w()({id:n.id,value:w()(n.record),component:n.component}))}var o=new XMLHttpRequest;o.open("post",this.config.save_url||"/editor/save"),o.onreadystatechange=function(e){if(4===o.readyState&&200===o.status){t.loading=!1;var i=JSON.parse(o.responseText);U.isArray(i)&&i.forEach(function(e){t.items[e[0]].id=e[1]}),t.is_save=!0,t.delete_items=[]}},o.onerror=function(t){alert("发生了一些错误，请联系管理员")},o.send(e)};this.loading_more(e)},loading_more:function(t,e){function i(){n.loading_index=++n.loading_index%100,n.loading?setTimeout(i,30):n.loading_index=0}var n=this;return!!n.loading||(!(!e||!e.apply(n))||(n.loading=!0,n.loading_index=0,i(),t.apply(n)))},leave_operator:function(){this.display_operator_choose=-1},move_operator:function(t,e,i){"plus"===t&&(this.display_operator_choose=i)},do_operator_many2one_choose:function(t,e,i,n){var o=this;o.display_operator_choose=-1,o.items.splice(i+1,0,n?s(""):a(t)),g.a.nextTick(function(){h(i)})},do_operator:function(t,e,i){"plus"===t?0===this.many2one_choose.length&&(this.items.splice(i+1,0,s()),g.a.nextTick(function(){h(i)})):"delete"===t&&(this.items[i].id>0&&this.delete_items.push(this.items[i].id),this.items.splice(i,1))},click_item:function(t){this.choose_index=this.choose_index===t?-1:t},dragover:function(){},dragend:function(){this.dragging=!1},drop:function(t){this.dragging=!1;for(var e=0;e<t.dataTransfer.files.length;e++)this.preview_file(t.dataTransfer.files[e])},preview_file:function(t){this.items.push(r(t))},dragenter:function(){this.dragging=!0},dragleave:function(){this.dragging=!1}},watch:{items:function(t){t.length<=0&&(this.items=[{value:"",component:"text-input"}]),this.is_save=!1}}},q=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"vux-editor"}},[i("div",{staticClass:"editor-loading"},[i("div",{staticClass:"editor-loading-layer",style:{width:t.loading_index+"%"}})]),t._v(" "),i("div",{staticClass:"editor-button"},[i("a",{staticClass:"editor-button-save",on:{click:t.save}},[t._v(t._s(t.is_save?"保存成功":"保存编辑器"))]),t._v(" "),0===t.many2one_choose.length?i("a",{staticClass:"editor-button-new",on:{click:function(e){e.preventDefault(),e.stopPropagation(),t.newRecord(e)}}},[t._v("添加描述信息")]):t._e(),t._v(" "),t.many2one_choose.length>0?i("div",{staticClass:"many2one-choose",on:{mouseleave:t.choose_leave,mouseover:t.choose_over}},[i("a",{staticClass:"editor-button-new"},[t._v("添加内容")]),t._v(" "),i("ul",{directives:[{name:"show",rawName:"v-show",value:t.is_display_many2one_choose,expression:"is_display_many2one_choose"}],staticClass:"many2one-choose-list",attrs:{transition:"expand"}},[t._l(t.many2one_choose,function(e){return i("li",{on:{click:function(i){if(i.preventDefault(),i.target!==i.currentTarget)return null;t.do_many2one_choose(e)}}},[t._v(t._s(e.string))])}),t._v(" "),i("li",{on:{click:function(e){if(e.preventDefault(),e.target!==e.currentTarget)return null;t.newRecord(e)}}},[t._v("添加描述信息")])],2)]):t._e(),t._v(" "),i("a",{staticClass:"editor-button-hidden",on:{click:function(e){e.preventDefault(),e.stopPropagation(),t.display_device(e)}}},[t._v(t._s(t.is_display_device?"关闭预览":"打开预览"))])]),t._v(" "),i("div",{staticClass:"dftg-editor",class:{dragging:t.dragging},on:{dragover:function(e){e.preventDefault(),t.dragover(e)},dragend:function(e){e.preventDefault(),t.dragend(e)},drop:function(e){e.preventDefault(),t.drop(e)},dragenter:function(e){e.preventDefault(),e.stopPropagation(),t.dragenter(e)},dragleave:function(e){if(e.preventDefault(),e.stopPropagation(),e.target!==e.currentTarget)return null;t.dragleave(e)}}},[i("ul",{attrs:{id:"product_items"}},t._l(t.items,function(e,n){return i("li",{staticClass:"editor-item",class:{choosed:n==t.choose_index},attrs:{"data-index":n},on:{click:function(e){t.click_item(n)}}},[i(e.component,{tag:"component",attrs:{config:t.config,model:e,index:n}}),t._v(" "),i("ul",{staticClass:"operator-set",on:{mouseleave:t.leave_operator}},[t._l(t.operators,function(o,s){return i("li",{staticClass:"operator_icon",class:o.operator_icon,on:{click:function(i){i.preventDefault(),i.stopPropagation(),t.do_operator(o.method,e,n)},mouseover:function(i){if(i.preventDefault(),i.stopPropagation(),i.target!==i.currentTarget)return null;t.move_operator(o.method,e,n)}}})}),t._v(" "),t.many2one_choose.length>0?i("ul",{directives:[{name:"show",rawName:"v-show",value:t.display_operator_choose===n,expression:"display_operator_choose === item_index"}],staticClass:"many2one-operator-choose-list",attrs:{transition:"expand"}},[t._l(t.many2one_choose,function(o){return i("li",{on:{click:function(i){if(i.preventDefault(),i.target!==i.currentTarget)return null;t.do_operator_many2one_choose(o,e,n)}}},[t._v(t._s(o.string))])}),t._v(" "),i("li",{on:{click:function(i){if(i.preventDefault(),i.target!==i.currentTarget)return null;t.do_operator_many2one_choose(t.many2one,e,n,"text")}}},[t._v("添加描述信息")])],2):t._e()],2)],1)})),t._v(" "),i("div",{staticClass:"editor-comment",class:[t.items.length>1||"image-input"===t.items[0].component?"editor-comment-hide":""]},[i("p",[t._v("直接在图片拖放到这里就可以自动上传图片")]),t._v(" "),i("p",[t._v("使用shift + 回车键直接创建一个新的行")]),t._v(" "),i("p",[t._v("使用shift + 上/下 在不同行直接来回切换")]),t._v(" "),i("p",[t._v("使用右边的保存编辑器按钮来保存所有编辑的描述")])])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.is_display_device,expression:"is_display_device"}],staticClass:"editor-device"},[i("div",{staticClass:"editor-content"},[t._l(t.items,function(e){return["text-input"===e.component?i("div",[t._v(t._s(e.value))]):t._e(),t._v(" "),"image-input"===e.component?i("img",{attrs:{src:e.value}}):t._e()]})],2)])])},V=[],X={render:q,staticRenderFns:V},Y=X,Q=i("VU/8"),j=c,G=Q(N,Y,!1,j,null,null),J=G.exports,Z=i("mtWM"),tt=i.n(Z),et=i("7t+N");g.a.prototype.$http=tt.a;var it={loading_index:0,items:[{value:"",component:"text-input",record:{}}],operators:[{method:"delete",operator_icon:"operator_icon_delete"}],is_display_many2one_choose:!1,display_operator_choose:-1,dragging:!1,choose_index:-1,loading:!1,delete_items:[],is_display_device:!0,is_fullscreen:!1,original_height:0,is_preview:!1},nt={props:["config"],name:"images",mounted:function(){u.bind(this)()},data:function(){return it},events:{"add-text":function(t){this.items.splice(t+1,0,f("")),g.a.nextTick(function(){p(t)})},"next-textarea":p,"prev-textarea":v,"text-input-change":function(){(new g.a).$emit("text-input-change")}},components:{Sortable:K.a,"image-input":H},created:function(){this.get()},methods:{get:function(){var t=this,e=t.config.getFunc||function(){return et.when(et.post(t.config.get_url||"/images/get",{editor_id:t.config.osv.editor_id,osv_info:w()(t.config.osv)}))},i=t.config.getDone||function(e){e=JSON.parse(e),e.forEach(function(t){"many2one-input"===t.component&&(t.record=JSON.parse(t.value))}),t.items=e,t.loading=!1};this.loading_more(e).then(i)},newRecord:function(){var t=this;t.is_display_many2one_choose=!1,t.items.push(f()),g.a.nextTick(function(){p(t.items.length-2)})},loading_more:function(t,e){function i(){n.loading_index=++n.loading_index%100,n.loading?setTimeout(i,30):n.loading_index=0}var n=this;return!!n.loading||(!(!e||!e.apply(n))||(n.loading=!0,n.loading_index=0,i(),t.apply(n)))},leave_operator:function(){this.display_operator_choose=-1},move_operator:function(t,e,i){"plus"===t&&(this.display_operator_choose=i)},do_operator:function(t,e,i){"delete"===t&&(console.log(this.items),this.items[i].id>0&&this.$http.post("/image/delete",{id:this.items[i].id}).then(function(t){}),this.items.splice(i,1))},click_item:function(t){this.choose_index=this.choose_index===t?-1:t},dragover:function(){},dragend:function(){this.dragging=!1},drop:function(t){this.dragging=!1;for(var e=0;e<t.dataTransfer.files.length;e++)this.preview_file(t.dataTransfer.files[e])},preview_file:function(t){this.items.push(x(t))},dragenter:function(){this.dragging=!0},dragleave:function(){this.dragging=!1},newImageAddId:function(t,e){console.log(t),console.log(e),this.items[e].id=t},imageChangeList:function(t,e){this.$http.post("/image/change_order",{change_list:t,ids:e}).then(function(t){t.data.result})},addNewImage:function(t){}},watch:{items:function(t){var e=this,i=[],n=[],o=[];t.length<=0&&(this.items=[{value:"",component:"text-input"}]),t.forEach(function(t,n){t.index!==n&&(t.index=n,i.push({id:t.id,index:n,product_id:e.config.osv.editor_id,file_url:t.value}),o.push(""+t.id)),t.id}),o.length>0&&i.length>0&&e.imageChangeList(i,o),n.length>0&&e.addNewImage(n)}}},ot=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"vux-images"}},[i("div",{staticClass:"editor-loading"},[i("div",{staticClass:"editor-loading-layer",style:{width:t.loading_index+"%"}})]),t._v(" "),i("div",{staticClass:"dftg-editor",class:{dragging:t.dragging},on:{dragover:function(e){e.preventDefault(),t.dragover(e)},dragend:function(e){e.preventDefault(),t.dragend(e)},drop:function(e){e.preventDefault(),t.drop(e)},dragenter:function(e){e.preventDefault(),e.stopPropagation(),t.dragenter(e)},dragleave:function(e){if(e.preventDefault(),e.stopPropagation(),e.target!==e.currentTarget)return null;t.dragleave(e)}}},[i("ul",{attrs:{id:"image_items"}},t._l(t.items,function(e,n){return i("li",{staticClass:"editor-item",class:{choosed:n==t.choose_index},attrs:{"data-index":n},on:{click:function(e){t.click_item(n)}}},[i(e.component,{tag:"component",attrs:{config:t.config,model:e,id:"item.id",product_id:t.config.osv.editor_id,index:n},on:{addId:t.newImageAddId}}),t._v(" "),i("ul",{staticClass:"operator-set",on:{mouseleave:t.leave_operator}},t._l(t.operators,function(o,s){return i("li",{staticClass:"operator_icon",class:o.operator_icon,on:{click:function(i){i.preventDefault(),i.stopPropagation(),t.do_operator(o.method,e,n)},mouseover:function(i){if(i.preventDefault(),i.stopPropagation(),i.target!==i.currentTarget)return null;t.move_operator(o.method,e,n)}}})}))],1)})),t._v(" "),i("div",{staticClass:"editor-comment",class:[t.items.length>1||"image-input"===t.items[0].component?"editor-comment-hide":""]},[i("p",[t._v("直接在图片拖放到这里就可以自动上传图片")])])])])},st=[],lt={render:ot,staticRenderFns:st},rt=lt,at=i("VU/8"),ht=y,dt=at(nt,rt,!1,ht,null,null),ct=dt.exports,ft=i("ktFh"),ut=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"grid",staticClass:"excel-table",style:"height:"+(t.height+2)+"px;",on:{paste:t.doPaste}},[i("div",{ref:"input",staticClass:"input-content",style:t.inputStyles,attrs:{contenteditable:"true"},on:{input:t.setValueTemp,blur:t.handleInputBlur,keydown:[function(e){if(!("button"in e)&&t._k(e.keyCode,"tab",9,e.key))return null;e.preventDefault()},function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;e.preventDefault()},function(e){if(!("button"in e)&&t._k(e.keyCode,"esc",27,e.key))return null;e.preventDefault()}]}}),t._v(" "),i("div",{ref:"inputSelect",staticClass:"input-content",attrs:{contenteditable:"true"},on:{keydown:function(t){t.preventDefault()}}}),t._v(" "),i("div",{staticClass:"horizontal-container",style:{width:t.width-t.scrollerWidth+2+"px"},on:{click:function(e){t.scroll(e,0)}}},[i("div",{ref:"horizontal",staticClass:"scroll-bar-horizontal",style:{width:t.horizontalBar.size+"px",left:t.horizontalBar.x+"px"},on:{mousedown:function(e){t.dragMove(e,0)}}},[i("div",{style:t.horizontalBar.move?"background-color:#a1a1a1;":"background-color:#c1c1c1;"})])]),t._v(" "),i("canvas",{ref:"canvas",style:"width:500px;height:400px;",attrs:{width:t.width,height:t.height}})])},xt=[],pt={render:ut,staticRenderFns:xt},vt=pt,yt=i("VU/8"),_t=_,gt=yt(ft.a,vt,!1,_t,"data-v-d16fdd66",null),mt=gt.exports,wt=mt,bt={name:"ctable",components:{Grid:wt},data:function(){return{columnSet:!1,showCheckbox:!1,data:[],columns:[{title:"品牌",key:"brandName",width:80},{title:"商品名称",key:"goodsName",width:150},{title:"规格型号",key:"sn",width:100},{title:"物料编码",key:"materialNo",width:100},{title:"单位",key:"unit",width:70},{title:"数量",key:"requiredQuantity",width:70},{title:"客户备注",key:"customerRemarks",width:150},{title:"采购价(元)",key:"purchasePrice",width:80},{title:"销售价(元)",key:"salePrice",width:80},{title:"货期",width:100,key:"shipDesc"}]}},created:function(){for(var t=0;t<10;t+=1)this.data.push({brandName:"博世",goodsName:"电钻",sn:"SDFSD",materialNo:"1231",unit:"个",requiredQuantity:10,customerRemarks:"测试测试",purchasePrice:10.2,salePrice:12.3,shipDesc:10})},methods:{update:function(t){},focus:function(t){}}},Ct=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("grid",{attrs:{"grid-data":t.data,columns:t.columns,showCheckbox:t.showCheckbox,columnSet:t.columnSet,"left-height":20,showRate:!1},on:{focus:t.focus,updateValue:t.update}})],1)},kt=[],It={render:Ct,staticRenderFns:kt},At=It,Pt=i("VU/8"),Bt=Pt(bt,At,!1,null,null,null),Tt=Bt.exports;new g.a({el:"#product-editor",components:{Editor:J,Images:ct,CTable:Tt}}),g.a.config.devtools=!0,g.a.component("editor",J),g.a.component("images",ct),g.a.component("ctable",Tt),window.Vue=g.a},OnGL:function(t,e,i){"use strict";var n=i("Dd8w"),o=i.n(n);e.a={data:function(){return{history:[],historyIndex:0,currentStateValue:null}},created:function(){var t=this;this.$on("history_back",function(){if(t.historyIndex>=0){var e=t.history[t.historyIndex];"edit"===e.type?(t.saveItem(e.before,!1),t.focusCellByOriginCell(t.getCellByRowAndKey(e.before.index,e.before.key)),t.selectArea=null,t.isSelect=!1):"editMore"===e.type&&(t.$emit("updateValue",t.saveItems(e.before,!1)),t.focusCell=e.focusCell,t.rowFocus={cellX:t.focusCell.x,cellY:t.focusCell.y,rowIndex:t.focusCell.rowIndex,offset:o()({},t.offset)},t.paintFocusCell(t.focusCell),t.selectArea=e.selectArea,t.isSelect=!0,t.rePainted()),t.historyIndex-=1}}),this.$on("history_forward",function(){if(t.historyIndex!==t.history.length-1){t.historyIndex+=1;var e=t.history[t.historyIndex];"edit"===e.type&&(t.saveItem(e.after,!1),t.focusCellByOriginCell(t.getCellByRowAndKey(e.after.index,e.after.key)))}})},methods:{pushState:function(t){this.history=this.history.slice(0,this.historyIndex+1),this.history.push(t),this.history.length>20&&this.history.splice(0,1),this.historyIndex=this.history.length-1}}}},QWnI:function(t,e,i){"use strict";var n=i("Dd8w"),o=i.n(n),s=i("BO1k"),l=i.n(s);e.a={data:function(){var t=new Image;t.src=i("cMfR");var e=new Image;e.src=i("ZBat");var n=new Image;return n.src=i("eOx0"),{headerColor:"#333333",textColor:"#666666",borderColor:"#d4d4d4",white:"#ffffff",shadowColor:"rgba(0,0,0,0.2)",fillColor:"#f9f9f9",headFillColor:"#f2f2f2",buttonColor:"#20a0ff",focusColor:"#4285f4",selectColor:"#6bc9ff",selectAreaColor:"rgba(160, 195, 255, 0.2)",selectRowColor:"#f6f6f6",dotColor:"#74d337",oncheck:t,offcheck:e,more:n,words:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"]}},methods:{initCanvas:function(){var t=this.$refs.canvas,e="";this.ctx?e=this.ctx:(e=t.getContext("2d"),this.ctx=e),e.font="normal 12px PingFang SC";var i=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;this.ratio=(window.devicePixelRatio||1)/i,this.getAllCells(this.data,this.columns),this.setBodyHeight(this.allRows,this.originPoint),this.setMaxpoint(this.width,this.height,this.fixedWidth,this.scrollerWidth),this.resetScrollBar(this.maxPoint,this.bodyWidth,this.bodyHeight,this.fixedWidth)},rePainted:function(){var t=this.initDisplayItems();if(this.autoAddRow)if(t.displayRows[t.displayRows.length-1].rowIndex>=this.allRows.length-50){for(var e=this.data.length,i=0;i<100;i+=1)this.data.push(this.templateData);this.setAllCells(e),t=this.initDisplayItems()}else this.data.length>this.initRows&&t.displayRows[t.displayRows.length-1].rowIndex<=this.allRows.length-200&&(this.data.splice(this.data.length-100,100),this.allCells.splice(this.allCells.length-100,100),this.allRows.splice(this.allRows.length-100,100),this.setBodyHeight(this.allRows,this.originPoint),this.resetScrollBar(this.maxPoint,this.bodyWidth,this.bodyHeight,this.fixedWidth),t=this.initDisplayItems());return this.clearPainted(),this.painted(t),t},clearPainted:function(){this.renderButtons=[],this.ctx.clearRect(0,0,this.width,this.height)},painted:function(t){var e=t.displayColumns,i=t.displayRows,n=t.displayCells,o=t.displayFixedCells,s=this.ctx;s.fillStyle=this.headerColor,s.textAlign="center",s.lineWidth=1,s.strokeStyle=this.borderColor,s.textBaseline="middle",s.save(),this.paintSelectRow(s,i),this.paintLine(s,i,e),this.paintBody(s,n),this.isSelect&&this.paintSelect(s,this.selectArea),this.isFocus&&this.paintFocus(s,this.focusCell),this.paintHeader(s,e),this.showCheckbox&&this.paintCheckbox(s,i),this.isMultiSelect&&this.paintMultiSelect(s,this.multiSelect),this.paintSerial(s,i),this.paintNo(s),o.length>0&&0===this.fillWidth&&this.paintFixedCells(s,o,e),this.paintHeadWord(s,e),this.painScroller(s,this.scrollerWidth)},paintSelectRow:function(t,e){var i=this.p,n=this.i,o=this.maxPoint,s=this.rowFocus,r=!0,a=!1,h=void 0;try{for(var d,c=l()(e);!(r=(d=c.next()).done);r=!0){var f=d.value;s&&s.cellY===f.y&&(t.fillStyle=this.selectRowColor,t.fillRect(i(-1),i(f.y),n(o.x),n(f.height)))}}catch(t){a=!0,h=t}finally{try{!r&&c.return&&c.return()}finally{if(a)throw h}}},paintLine:function(t,e,i){var n=this.p,o=this.i,s=this.maxPoint,r=this.rowHeight,a=(this.rowFocus,this.serialWidth),h=this.bodyHeight,d=this.toolbarHeight;t.beginPath(),t.strokeStyle=this.borderColor,t.lineWidth=1;var c=!0,f=!1,u=void 0;try{for(var x,p=l()(i);!(c=(x=p.next()).done);c=!0){var v=x.value;v.fixed||(t.moveTo(n(v.x+v.width)+.25,d),t.lineTo(n(v.x+v.width),o(h)))}}catch(t){f=!0,u=t}finally{try{!c&&p.return&&p.return()}finally{if(f)throw u}}var y=!0,_=!1,g=void 0;try{for(var m,w=l()(e);!(y=(m=w.next()).done);y=!0){var b=m.value;t.moveTo(o(0),n(b.y+b.height)),t.lineTo(o(s.x),n(b.y+b.height))}}catch(t){_=!0,g=t}finally{try{!y&&w.return&&w.return()}finally{if(_)throw g}}t.moveTo(n(a),n(r+d)),t.lineTo(n(a),o(h)),t.moveTo(o(0),n(r+d)),t.lineTo(o(s.x),n(r+d)),t.stroke()},paintBody:function(t,e){var i=this.paintText,n=this.i;t.beginPath(),t.font="normal 12px PingFang SC",t.fillStyle=this.textColor;var o=!0,s=!1,r=void 0;try{for(var a,h=l()(e);!(o=(a=h.next()).done);o=!0){var d=a.value,c=!0,f=!1,u=void 0;try{for(var x,p=l()(d);!(c=(x=p.next()).done);c=!0){var v=x.value;(!v.fixed||this.fillWidth>0)&&(v.buttons?this.paintButton(t,v,n(v.x),n(v.y)):v.paintText&&v.paintText.length>0&&i(t,n(v.x+v.width/2),n(16+v.y),v.paintText))}}catch(t){f=!0,u=t}finally{try{!c&&p.return&&p.return()}finally{if(f)throw u}}}}catch(t){s=!0,r=t}finally{try{!o&&h.return&&h.return()}finally{if(s)throw r}}t.stroke()},paintText:function(t,e,i,n){for(var o=0;o<n.length;o+=1)t.fillText(n[o],e,i+18*o)},paintButton:function(t,e,i,n){var s=0,r=!0,a=!1,h=void 0;try{for(var d,c=l()(e.buttons);!(r=(d=c.next()).done);r=!0){var f=d.value;s+=t.measureText(f.title).width}}catch(t){a=!0,h=t}finally{try{!r&&c.return&&c.return()}finally{if(a)throw h}}e.buttons.length>1&&(s+=20*(e.buttons.length-1));var u=0;u=e.width-s>0?(e.width-s)/2:0,t.save(),t.font="normal 12px PingFang SC";var x=!0,p=!1,v=void 0;try{for(var y,_=l()(e.buttons);!(x=(y=_.next()).done);x=!0){var g=y.value,m=t.measureText(g.title).width;t.fillStyle=g.color?g.color:this.buttonColor,t.fillText(g.title,u+i+m/2,n+16),this.renderButtons.push({x:u+i,y:n+7.5,cellX:i,cellY:n,width:m,height:12,click:g.click,rowIndex:e.rowIndex,offset:o()({},this.offset),fixed:e.fixed}),u+=m+20}}catch(t){p=!0,v=t}finally{try{!x&&_.return&&_.return()}finally{if(p)throw v}}t.restore()},paintSelect:function(t,e){var i=this.p,n=this.originPoint,o=this.maxPoint;e.x+e.width>n.x&&e.y+e.height>n.y&&e.x<o.x&&e.y<o.y&&(t.beginPath(),t.lineWidth=1,t.strokeStyle=this.selectColor,t.moveTo(i(e.x),i(e.y)),t.lineTo(i(e.x+e.width),i(e.y)),t.lineTo(i(e.x+e.width),i(e.y+e.height)),t.lineTo(i(e.x),i(e.y+e.height)),t.closePath(),t.fillStyle=this.selectAreaColor,t.fill(),t.stroke())},paintMultiSelect:function(t,e){var i=this.p;t.beginPath(),t.lineWidth=2,t.setLineDash([10,5]),t.strokeStyle="#e33333",t.moveTo(i(e.x),i(e.y)),t.lineTo(i(e.x+e.width),i(e.y)),t.lineTo(i(e.x+e.width),i(e.y+e.height)),t.moveTo(i(e.x),i(e.y)),t.lineTo(i(e.x),i(e.y+e.height)),t.stroke(),t.setLineDash([0])},paintFocus:function(t,e){var i=this.i,n=this.originPoint,o=this.maxPoint,s=this.toolbarHeight;e.x+e.width>n.x&&e.y+e.height>n.y+s&&e.x<o.x&&e.y<o.y&&(t.lineWidth=2,t.strokeStyle=this.focusColor,t.strokeRect(i(e.x),i(e.y),e.width,e.height))},paintHeader:function(t,e){var i=this.p,n=this.i,o=this.focusCell,s=this.width,r=this.rowHeight,a=this.rowFocus,h=this.toolbarHeight;t.fillStyle=this.fillColor,t.fillRect(0,h,s,r),t.beginPath(),t.strokeStyle=this.borderColor,t.font="bold 12px PingFang SC",t.lineWidth=1;var d=!0,c=!1,f=void 0;try{for(var u,x=l()(e);!(d=(u=x.next()).done);d=!0){var p=u.value;if(!p.fixed||this.fillWidth>0){var v=this.headerColor;a&&a.cellX===p.x&&(t.fillStyle=this.selectRowColor,t.fillRect(i(p.x),i(h),i(p.width),i(r-1)),v=this.focusColor),t.fillStyle=v,t.fillText(p.title,i(p.x+p.width/2),i(16+h)),t.moveTo(i(p.x+p.width),i(h)),t.lineTo(i(p.x+p.width),i(r+h))}}}catch(t){c=!0,f=t}finally{try{!d&&x.return&&x.return()}finally{if(c)throw f}}t.stroke(),o&&(t.beginPath(),t.strokeStyle=this.focusColor,t.lineWidth=2,t.moveTo(n(o.x-1),n(r+h)),t.lineTo(n(o.x+o.width+1),n(r+h)),t.stroke())},paintCheckbox:function(t,e){this.checkboxs=[];var i=this.i,n=this.p,o=this.offset,s=this.maxPoint,r=this.allRows,a=this.focusCell,h=this.rowFocus,d=this.checkboxWidth,c=this.rowHeight,f=this.serialWidth,u=this.originPoint,x=this.height,p=this.oncheck,v=this.offcheck,y=this.selected,_=this.toolbarHeight;t.fillStyle=this.fillColor,t.save(),0!==o.x&&(t.shadowBlur=10,t.shadowColor=this.shadowColor),t.fillRect(i(0),n(_),i(d+f),i(x)),t.restore(),t.beginPath(),t.strokeStyle=this.borderColor,t.lineWidth=1,t.moveTo(n(f),i(_)),t.lineTo(n(f),i(s.y)),t.moveTo(n(f+d),i(_)),t.lineTo(n(f+d),i(s.y));var g=!0,m=!1,w=void 0;try{for(var b,C=l()(e);!(g=(b=C.next()).done);g=!0){var k=b.value;16+k.y>-k.height&&(h&&h.cellY===k.y&&(t.fillStyle=this.selectRowColor,t.fillRect(n(f),n(k.y),i(d-1),i(k.height))),t.moveTo(n(f),n(k.y+k.height)),t.lineTo(n(f+d),n(k.y+k.height)),-1!==y.indexOf(k.rowIndex)?t.drawImage(p,n(f+5),n(k.y+5),20,20):t.drawImage(v,n(f+5),n(k.y+5),20,20),this.checkboxs.push({rowIndex:k.rowIndex,x:n(f+5),y:n(k.y+5),width:20,height:20}))}}catch(t){m=!0,w=t}finally{try{!g&&C.return&&C.return()}finally{if(m)throw w}}t.stroke(),this.focusCell&&(t.beginPath(),t.strokeStyle=this.focusColor,t.lineWidth=2,t.moveTo(i(f+d),i(a.y-1)),t.lineTo(i(f+d),i(a.y+a.height+1)),t.stroke()),t.beginPath(),t.strokeStyle=this.borderColor,t.fillStyle=this.fillColor,t.lineWidth=1,t.fillRect(n(f+1),n(_),i(d),i(c)),t.moveTo(n(f),n(u.y+_)),t.lineTo(n(f+d),n(u.y+_)),t.lineTo(n(f+d),n(_)),t.stroke(),y.length===r.length?t.drawImage(p,n(f+5),n(5+_),20,20):t.drawImage(v,n(f+5),n(5+_),20,20)},paintSerial:function(t,e){var i=this.i,n=this.p,o=this.offset,s=this.bodyHeight,r=this.focusCell,a=this.rowFocus,h=this.serialWidth;this.showCheckbox||(t.fillStyle=this.fillColor,t.save(),0!==o.x&&(t.shadowBlur=10,t.shadowOffsetX=3,t.shadowColor=this.shadowColor),t.fillRect(0,0,h,s),t.restore()),t.lineWidth=1;var d=!0,c=!1,f=void 0;try{for(var u,x=l()(e);!(d=(u=x.next()).done);d=!0){var p=u.value;if(16+p.y>-p.height){t.beginPath(),t.strokeStyle=this.borderColor;var v=this.textColor;a&&a.cellY===p.y&&(t.fillStyle=this.selectRowColor,t.fillRect(-1,p.y+1,h+1,p.height),v=this.focusColor),t.fillStyle=v,t.fillText(""+(p.rowIndex+1),h/2,16+p.y),t.moveTo(n(0),n(p.y+p.height)),t.lineTo(n(h),n(p.y+p.height)),t.stroke(),p.showDot&&(t.beginPath(),t.fillStyle=this.dotColor,t.strokeStyle=this.fillColor,t.arc(16,16+p.y,4,0,2*Math.PI),t.fill(),t.stroke())}}}catch(t){c=!0,f=t}finally{try{!d&&x.return&&x.return()}finally{if(c)throw f}}t.stroke(),this.focusCell&&!this.showCheckbox&&(t.beginPath(),t.strokeStyle=this.focusColor,t.lineWidth=2,t.moveTo(i(h),i(r.y-1)),t.lineTo(i(h),i(r.y+r.height+1)),t.stroke())},paintNo:function(t){var e=this.p,i=this.rowHeight,n=this.serialWidth,o=this.more,s=this.toolbarHeight;t.beginPath(),t.strokeStyle=this.borderColor,t.fillStyle=this.fillColor,t.fillRect(0,s,n,i),t.fillStyle=this.headerColor,t.fillText("序号",n/2,16+s),t.lineWidth=1,t.moveTo(e(n),e(s)),t.lineTo(e(n),e(i+s)),t.lineTo(e(0),e(i+s)),t.stroke(),this.columnSet&&t.drawImage(o,50,6+s,18,18)},paintFixedCells:function(t,e,i){var n=this.bodyHeight,o=this.rowHeight,s=this.maxPoint,r=this.paintText,a=this.paintButton,h=this.p,d=this.i,c=this.allColumns,f=this.fixedWidth,u=this.fixedColumns,x=this.rowFocus,p=this.toolbarHeight;t.save();var v=i[i.length-1];v.cellIndex===c.length-1-u.length?v.x+v.width>s.x&&(t.shadowBlur=10,t.shadowColor=this.shadowColor):(t.shadowBlur=10,t.shadowColor=this.shadowColor),t.fillStyle=this.white,t.fillRect(h(s.x),h(p),d(f+1),d(n)),t.restore(),t.beginPath(),t.fillStyle=this.textColor,t.strokeStyle=this.borderColor,t.lineWidth=1;var y=s.x,_=!0,g=!1,m=void 0;try{for(var w,b=l()(e.reverse());!(_=(w=b.next()).done);_=!0){var C=w.value,k=0,I=!0,A=!1,P=void 0;try{for(var B,T=l()(C);!(I=(B=T.next()).done);I=!0){var D=B.value;k=D.width,x&&x.cellY===D.y&&(t.fillStyle=this.selectRowColor,t.fillRect(h(y),h(D.y),d(this.maxPoint.x),d(D.height))),D.buttons?a(t,D,y,D.y):D.paintText&&D.paintText.length>0&&r(t,d(y+D.width/2),d(16+D.y),D.paintText),t.moveTo(h(y),h(D.y)),t.lineTo(h(y),h(D.y+D.height)),t.lineTo(h(y+D.width),h(D.y+D.height))}}catch(t){A=!0,P=t}finally{try{!I&&T.return&&T.return()}finally{if(A)throw P}}y+=k}}catch(t){g=!0,m=t}finally{try{!_&&b.return&&b.return()}finally{if(g)throw m}}t.stroke(),t.beginPath(),t.font="bold 12px PingFang SC";var R=s.x,E=!0,S=!1,W=void 0;try{for(var F,M=l()(u);!(E=(F=M.next()).done);E=!0){var O=F.value,z=this.headerColor;x&&x.cellX===R?(t.fillStyle=this.selectRowColor,t.fillRect(R,p,O.width,o),z=this.focusColor):(t.fillStyle=this.fillColor,t.fillRect(R,p,O.width,o)),t.fillStyle=z,t.fillText(O.title,d(R+O.width/2),16+p),t.moveTo(h(R),h(p)),t.lineTo(h(R),h(o+p)),t.lineTo(h(R+O.width),h(o+p)),R+=O.width}}catch(t){S=!0,W=t}finally{try{!E&&M.return&&M.return()}finally{if(S)throw W}}t.stroke()},painScroller:function(t,e){var i=this.p;t.fillStyle=this.white,t.fillRect(this.width-e+1,0,e-1,this.height),t.fillRect(0,this.height-e+1,this.width,e-1),t.beginPath(),t.lineWidth=1,t.strokeStyle=this.borderColor,t.moveTo(i(this.width-e+1),i(0)),t.lineTo(i(this.width-e+1),i(this.height-e+1)),t.lineTo(i(0),i(this.height-e+1)),t.fillStyle=this.white,t.fillRect(i(this.width-e+1),i(this.height-e+1),e-1,e-1),t.stroke()},paintHeadWord:function(t,e){var i=this.p,n=this.width,o=this.rowHeight,s=this.rowFocus,r=this.toolbarHeight,a=this.maxPoint,h=this.fixedWidth,d=this.serialWidth,c=this.checkboxWidth,f=this.words;t.fillStyle=this.headFillColor,t.fillRect(0,r-o-1,n,o),t.beginPath(),t.strokeStyle=this.borderColor,t.font="bold 12px PingFang SC",t.lineWidth=1;var u=e[0].cellIndex,x=!0,p=!1,v=void 0;try{for(var y,_=l()(e);!(x=(y=_.next()).done);x=!0){var g=y.value;if(!g.fixed||this.fillWidth>0){var m=this.headerColor;s&&s.cellX===g.x&&(m=this.focusColor),t.fillStyle=m,t.fillText(f[u],i(g.x+g.width/2),i(16+r-o-1)),t.moveTo(i(g.x+g.width),i(r-o-1)),t.lineTo(i(g.x+g.width),i(r))}u+=1}}catch(t){p=!0,v=t}finally{try{!x&&_.return&&_.return()}finally{if(p)throw v}}var w=d;this.showCheckbox&&(w+=c),t.moveTo(i(w),i(r-o-1)),t.lineTo(i(w),i(r)),t.moveTo(i(a.x),i(r-o-1)),t.lineTo(i(a.x),i(r)),t.moveTo(i(0),i(r-1)),t.lineTo(i(a.x+h),i(r-1)),t.moveTo(i(0),i(r-o-1)),t.lineTo(i(a.x+h),i(r-o-1)),t.stroke(),t.fillStyle=this.headFillColor,t.fillRect(a.x+1,r-o,h,o-1),t.fillRect(0,i(r-o-1),w,o-1),t.beginPath(),t.moveTo(i(0),i(r-o-1)),t.lineTo(i(w),i(r)),t.stroke()},p:function(t){var e=""+t;return e&&e.indexOf&&-1===e.indexOf(".")?t+.5:t},i:function(t){return Math.round(t)}}}},Qf4e:function(t,e,i){"use strict";function n(t){i("t8SX")}var o=i("bOdI"),s=i.n(o),l="ivu-checkbox",r={name:"Checkbox",props:{disabled:{type:Boolean,default:!1},value:{type:[String,Number,Boolean],default:!1},label:{type:[String,Number,Boolean]},indeterminate:{type:Boolean,default:!1}},data:function(){return{model:[],currentValue:this.value}},computed:{wrapClasses:function(){var t;return[l+"-wrapper",(t={},s()(t,l+"-wrapper-checked",this.currentValue),s()(t,l+"-wrapper-disabled",this.disabled),t)]},checkboxClasses:function(){var t;return[""+l,(t={},s()(t,l+"-checked",this.currentValue),s()(t,l+"-disabled",this.disabled),s()(t,l+"-indeterminate",this.indeterminate),t)]},innerClasses:function(){return l+"-inner"},inputClasses:function(){return l+"-input"}},mounted:function(){this.updateModel(),this.showSlot=void 0!==this.$slots.default},methods:{change:function(t){if(this.disabled)return!1;var e=t.target.checked;return this.currentValue=e,this.$emit("input",e),this.$emit("on-change",e),null},updateModel:function(){this.currentValue=this.value}},watch:{value:function(){this.updateModel()}}},a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("label",{class:t.wrapClasses},[i("span",{class:t.checkboxClasses},[i("span",{class:t.innerClasses}),t._v(" "),i("input",{class:t.inputClasses,attrs:{type:"checkbox",disabled:t.disabled},domProps:{checked:t.currentValue},on:{change:t.change}})]),t._v(" "),t._t("default")],2)},h=[],d={render:a,staticRenderFns:h},c=d,f=i("VU/8"),u=n,x=f(r,c,!1,u,"data-v-1e8942b5",null);e.a=x.exports},SYhb:function(t,e,i){e=t.exports=i("FZ+f")(!1),e.push([t.i,"\n*[data-v-1e8942b5] {\n  font-size: 12px;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\ninput[data-v-1e8942b5] {\n  margin: 0;\n  padding: 0;\n}\n.ivu-checkbox[data-v-1e8942b5] {\n  display: inline-block;\n  vertical-align: middle;\n  white-space: nowrap;\n  cursor: pointer;\n  outline: 0;\n  line-height: 1;\n  position: relative;\n}\n.ivu-checkbox-wrapper[data-v-1e8942b5] {\n  cursor: pointer;\n  font-size: 12px;\n  display: inline-block;\n  margin-right: 8px;\n}\n.ivu-checkbox-checked .ivu-checkbox-inner[data-v-1e8942b5] {\n  border-color: #2d8cf0;\n  background-color: #2d8cf0;\n}\n.ivu-checkbox-input[data-v-1e8942b5] {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  z-index: 1;\n  cursor: pointer;\n  opacity: 0;\n}\n.ivu-checkbox-checked .ivu-checkbox-inner[data-v-1e8942b5]:after {\n  content: '';\n  display: table;\n  width: 4px;\n  height: 8px;\n  position: absolute;\n  top: 1px;\n  left: 4px;\n  border: 2px solid #fff;\n  border-top: 0;\n  border-left: 0;\n  -webkit-transform: rotate(45deg) scale(1);\n          transform: rotate(45deg) scale(1);\n  -webkit-transition: all .2s ease-in-out;\n  transition: all .2s ease-in-out;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n.ivu-checkbox-inner[data-v-1e8942b5]:after {\n  content: '';\n  display: table;\n  width: 4px;\n  height: 8px;\n  position: absolute;\n  top: 1px;\n  left: 4px;\n  border: 2px solid #fff;\n  border-top: 0;\n  border-left: 0;\n  -webkit-transform: rotate(45deg) scale(0);\n          transform: rotate(45deg) scale(0);\n  -webkit-transition: all .2s ease-in-out;\n  transition: all .2s ease-in-out;\n}\n.ivu-checkbox-inner[data-v-1e8942b5] {\n  display: inline-block;\n  width: 14px;\n  height: 14px;\n  position: relative;\n  top: 0;\n  left: 0;\n  border: 1px solid #dddee1;\n  border-radius: 2px;\n  background-color: #fff;\n  -webkit-transition: border-color .2s ease-in-out, background-color .2s ease-in-out;\n  transition: border-color .2s ease-in-out, background-color .2s ease-in-out;\n}\n",""])},TDAC:function(t,e){},W4W1:function(t,e,i){"use strict";var n=i("woOf"),o=i.n(n),s=i("Gu7T"),l=i.n(s),r=i("Dd8w"),a=i.n(r),h=i("BO1k"),d=i.n(h);e.a={data:function(){var t=this.leftHeight?window.innerHeight-this.leftHeight:500,e=70;this.showCheckbox&&(e+=30);var i=0;return this.showToolbar&&(i=60),{width:0,height:t,rowHeight:30,scrollerWidth:20,fixedWidth:0,bodyWidth:0,bodyHeight:0,serialWidth:70,checkboxWidth:30,fillWidth:0,toolbarHeight:i,allCells:[],displayCells:[],allRows:[],displayRows:[],allColumns:[],displayColumns:[],allFixedCells:[],displayFixedCells:[],fixedColumns:[],renderButtons:[],checkboxs:[],selected:[],offset:{x:0,y:0},originPoint:{x:e,y:30},maxPoint:{x:0,y:t-20}}},watch:{showCheckbox:function(){this.initSize()},leftHeight:function(){this.initSize()}},mounted:function(){this.width=this.$refs.grid.offsetWidth-2,this.height=this.leftHeight?window.innerHeight-this.leftHeight:500,this.maxPoint.y=this.height-this.scrollerWidth,this.bodyWidth=this.originPoint.x;var t=!0,e=!1,i=void 0;try{for(var n,o=d()(this.columns);!(t=(n=o.next()).done);t=!0){var s=n.value;this.bodyWidth+=s.width?s.width:100}}catch(t){e=!0,i=t}finally{try{!t&&o.return&&o.return()}finally{if(e)throw i}}this.bodyWidth<this.width-this.scrollerWidth&&(this.fillWidth=(this.width-this.bodyWidth-this.scrollerWidth)/this.columns.length,this.bodyWidth=this.width-this.scrollerWidth)},methods:{getAllCells:function(t,e){this.allCells=[],this.allRows=[],this.allColumns=[],this.allFixedCells=[],this.fixedColumns=[],this.fixedWidth=0;var i=this.rowHeight,n=this.ctx,o=this.getTextLine,s=this.allRows,l=this.allCells,r=this.allColumns,h=this.fixedColumns,c=this.allFixedCells,f=0,u=0,x=0,p=!0,v=!1,y=void 0;try{for(var _,g=d()(t);!(p=(_=g.next()).done);p=!0){var m=_.value,w=i,b=0,C=[];m.salePrice>0&&m.purchasePrice>0&&(u+=parseFloat(m.salePrice),x+=parseFloat(m.purchasePrice));var k=!0,I=!1,A=void 0;try{for(var P,B=d()(e);!(k=(P=B.next()).done);k=!0){var T=P.value;0===f&&(T.fixed?(this.fixedWidth+=T.width,h.push(a()({cellIndex:b},T)),r.push(a()({height:i,cellIndex:b},T,{checked:!0}))):r.push(a()({height:i,cellIndex:b},T,{checked:!0})));var D="",R=void 0,E=void 0;if(T.renderText?D=T.renderText(m):T.renderButton?R=T.renderButton(this.data[f],f):D=m[T.key],D||0===D){E=o(n,D,T.width?T.width:100);var S=0;E&&(S=E.length),S>1&&w<i+18*(S-1)&&(w=i+18*(S-1))}T.fixed,C.push({width:T.width?T.width:100,content:m[T.key],key:T.key,rowIndex:f,cellIndex:b,paintText:E,fixed:!0===T.fixed,readOnly:!0===T.readOnly,buttons:R,renderText:T.renderText,renderButton:T.renderButton,rowData:m,type:T.type,cellPosition:this.words[b]+(f+1)}),b+=1}}catch(t){I=!0,A=t}finally{try{!k&&B.return&&B.return()}finally{if(I)throw A}}l.push(C);var W=!1;this.showDot&&m[this.showDot.key]===this.showDot.value&&(W=!0),s.push({height:w,rowIndex:f,showDot:W}),f+=1}}catch(t){v=!0,y=t}finally{try{!p&&g.return&&g.return()}finally{if(v)throw y}}this.sumRate=u>0&&x>0?parseFloat(((u-x)/u*100).toFixed(2)):0;var F=!0,M=!1,O=void 0;try{for(var z,H=d()(h);!(F=(z=H.next()).done);F=!0){var L=z.value,K=[],U=0,$=!0,N=!1,q=void 0;try{for(var V,X=d()(l);!($=(V=X.next()).done);$=!0){var Y=V.value,Q=Y[L.cellIndex];K.push(a()({},Q,{height:s[U].height})),U+=1}}catch(t){N=!0,q=t}finally{try{!$&&X.return&&X.return()}finally{if(N)throw q}}c.push(K)}}catch(t){M=!0,O=t}finally{try{!F&&H.return&&H.return()}finally{if(M)throw O}}},fullScreen:function(){},initSize:function(){if(this.$refs.grid){this.width=this.$refs.grid.offsetWidth-2,this.height=this.leftHeight?window.innerHeight-this.leftHeight:500,this.showCheckbox?(this.initSelected&&(this.selected=[].concat(l()(this.initSelected))),this.originPoint.x=this.serialWidth+this.checkboxWidth,this.bodyWidth+=this.checkboxWidth):(this.originPoint.x=this.serialWidth,this.bodyWidth-=this.checkboxWidth),this.bodyWidth=this.originPoint.x;var t=0,e=!0,i=!1,n=void 0;try{for(var o,s=d()(this.allColumns);!(e=(o=s.next()).done);e=!0){var r=o.value;r.checked&&(this.bodyWidth+=r.width?r.width:100,t+=1)}}catch(t){i=!0,n=t}finally{try{!e&&s.return&&s.return()}finally{if(i)throw n}}this.fillWidth=0,this.bodyWidth<this.width-this.scrollerWidth&&(this.fillWidth=(this.width-this.bodyWidth-this.scrollerWidth)/t,this.bodyWidth=this.width-this.scrollerWidth),this.setBodyHeight(this.allRows,this.originPoint),this.setFixedWidth(this.allColumns,this.fillWidth),this.setMaxpoint(this.width,this.height,this.fixedWidth,this.scrollerWidth,this.fillWidth),this.resetScrollBar(this.maxPoint,this.bodyWidth,this.bodyHeight,this.fixedWidth),requestAnimationFrame(this.rePainted)}},setFixedWidth:function(t,e){this.fixedWidth=0;var i=!0,n=!1,o=void 0;try{for(var s,l=d()(t);!(i=(s=l.next()).done);i=!0){var r=s.value;r.checked&&r.fixed&&(this.fixedWidth+=r.width?r.width:100,this.fixedWidth+=e)}}catch(t){n=!0,o=t}finally{try{!i&&l.return&&l.return()}finally{if(n)throw o}}},setBodyHeight:function(t,e){var i=e.y;this.bodyHeight=i+this.toolbarHeight;var n=!0,o=!1,s=void 0;try{for(var l,r=d()(t);!(n=(l=r.next()).done);n=!0){var a=l.value;this.bodyHeight+=a.height}}catch(t){o=!0,s=t}finally{try{!n&&r.return&&r.return()}finally{if(o)throw s}}},setMaxpoint:function(t,e,i,n,o){this.maxPoint.x=o>0?t-n:t-n-i,this.maxPoint.y=e-n},setAllCells:function(t){for(var e=this.rowHeight,i=this.ctx,n=this.getTextLine,o=this.allRows,s=this.allCells,l=this.columns,r=t,a=0,h=0,c=t;c<this.data.length;c+=1){var f=this.data[c],u=e,x=0,p=[];f.salePrice>0&&f.purchasePrice>0&&(a+=parseFloat(f.salePrice),h+=parseFloat(f.purchasePrice));var v=!0,y=!1,_=void 0;try{for(var g,m=d()(l);!(v=(g=m.next()).done);v=!0){var w=g.value,b="",C=void 0,k=void 0;if(w.renderText?b=w.renderText(f):w.renderButton?C=w.renderButton(this.data[r],r):b=f[w.key],b||0===b){k=n(i,b,w.width?w.width:100);var I=0;k&&(I=k.length),I>1&&u<e+18*(I-1)&&(u=e+18*(I-1))}p.push({width:w.width?w.width:100,content:f[w.key],key:w.key,rowIndex:r,cellIndex:x,paintText:k,fixed:!0===w.fixed,readOnly:!0===w.readOnly,buttons:C,renderText:w.renderText,renderButton:w.renderButton,rowData:f,type:w.type}),x+=1}}catch(t){y=!0,_=t}finally{try{!v&&m.return&&m.return()}finally{if(y)throw _}}s.push(p);var A=!1;this.showDot&&f[this.showDot.key]===this.showDot.value&&(A=!0),o.push({height:u,rowIndex:r,showDot:A}),r+=1}this.sumRate=a>0&&h>0?parseFloat(((a-h)/a*100).toFixed(2)):0,this.setBodyHeight(this.allRows,this.originPoint),this.resetScrollBar(this.maxPoint,this.bodyWidth,this.bodyHeight,this.fixedWidth)},setCellItem:function(t,e,i){var n=this.ctx,o=this.allRows,s=this.allCells,l=this.getTextLine,r=this.rowHeight,a=o[t],h=s[t][e],d=0,c=l(n,i,h.width),f=0;c&&(f=c.length),f>1&&d<r+18*(f-1)&&(d=r+18*(f-1)),d>a.height&&(a.height=d),h.content=i,h.paintText=c},setCellItemByKey:function(t,e,i){var n=this.ctx,o=this.allRows,s=this.allCells,l=this.getTextLine,r=this.rowHeight,a=o[t],h=s[t],c=0,f=null;"salePrice"!==e&&"purchasePrice"!==e||(this.calculateSumRate(),this.focusCell&&t===this.focusCell.rowIndex&&this.calculateRate([this.focusCell.rowData]));var u=!0,x=!1,p=void 0;try{for(var v,y=d()(h);!(u=(v=y.next()).done);u=!0){if(v.value.key===e){f=s[t][c];break}c+=1}}catch(t){x=!0,p=t}finally{try{!u&&y.return&&y.return()}finally{if(x)throw p}}if(f){var _=0,g=l(n,i,f.width),m=0;g&&(m=g.length),m>1&&_<r+18*(m-1)&&(_=r+18*(m-1)),_>a.height&&(a.height=_,this.initSize()),f.content=i,f.paintText=g,this.focusCell&&this.focusCell.rowIndex===t&&this.focusCell.cellIndex===f.cellIndex&&(this.focusCell.content=i,this.focusCell.paintText=g)}},calculateRate:function(t){var e=0,i=0,n=!0,o=!1,s=void 0;try{for(var l,r=d()(t);!(n=(l=r.next()).done);n=!0){var a=l.value;a.salePrice>0&&a.purchasePrice>0&&(e+=parseFloat(a.salePrice),i+=parseFloat(a.purchasePrice))}}catch(t){o=!0,s=t}finally{try{!n&&r.return&&r.return()}finally{if(o)throw s}}this.rate=e>0&&i>0?parseFloat(((e-i)/e*100).toFixed(2)):0},calculateSumRate:function(){var t=0,e=0,i=!0,n=!1,o=void 0;try{for(var s,l=d()(this.data);!(i=(s=l.next()).done);i=!0){var r=s.value;r.salePrice>0&&r.purchasePrice>0&&(t+=parseFloat(r.salePrice),e+=parseFloat(r.purchasePrice))}}catch(t){n=!0,o=t}finally{try{!i&&l.return&&l.return()}finally{if(n)throw o}}this.sumRate=t>0&&e>0?parseFloat(((t-e)/t*100).toFixed(2)):0},setCellItemAll:function(t,e){var i=0,n=!0,o=!1,s=void 0;try{for(var l,r=d()(e);!(n=(l=r.next()).done);n=!0){var a=l.value;this.setCellItem(t,i,a),i+=1}}catch(t){o=!0,s=t}finally{try{!n&&r.return&&r.return()}finally{if(o)throw s}}},setCellRenderText:function(t){var e=t.renderText(t.rowData),i=this.allRows[t.rowIndex];if(e){var n=0,o=this.getTextLine(this.ctx,e,t.width),s=0;o&&(s=o.length),s>1&&n<this.rowHeight+18*(s-1)&&(n=this.rowHeight+18*(s-1)),n>i.height&&(i.height=n),t.content=e,t.paintText=o}else t.content="",t.paintText=[];return t},getDisplayColumns:function(){var t=this,e=this.offset.x,i=this.originPoint,n=this.maxPoint,s=this.allColumns,l=this.fillWidth,r=[],a=i.x+e,h=!0,c=!1,f=void 0;try{for(var u,x=d()(s);!(h=(u=x.next()).done);h=!0){var p=u.value;if(p.checked){var v=p.width+l;if(v+a>i.x&&a<n.x){var y=o()({},p,{x:a,width:v});r.push(y)}a+=v}}}catch(t){c=!0,f=t}finally{try{!h&&x.return&&x.return()}finally{if(c)throw f}}return setTimeout(function(){t.displayColumns=[].concat(r)},0),r},initDisplayItems:function(){var t=this.getDisplayColumns(),e=this.getDisplayRows(),i=this.getDisplayCells(e,t),n=this.getDisplayFixedCells(e);if(this.focusCell){this.freshFocusCell(this.focusCell.rowIndex,this.focusCell.cellIndex,e,t);var o=this.focusCell.offset;o.x===this.offset.x&&o.y===this.offset.y||(this.focusCell.x-=o.x-this.offset.x,this.focusCell.y-=o.y-this.offset.y,this.focusCell.offset=a()({},this.offset))}if(this.selectArea){var s=this.selectArea.offset;this.selectArea.x-=s.x-this.offset.x,this.selectArea.y-=s.y-this.offset.y,this.selectArea.offset=a()({},this.offset);for(var l=0,r=[],h=this.selectArea.rowIndex;h<this.selectArea.rowIndex+this.selectArea.rowCount;h+=1)l+=this.allRows[h].height,r.push(this.allCells[h][0].rowData);this.selectArea.height=l,this.calculateRate(r)}if(this.multiSelect&&(this.multiSelect.x-=this.multiSelect.offset.x-this.offset.x,this.multiSelect.offset=a()({},this.offset)),this.rowFocus){var d=this.rowFocus.offset;d.x===this.offset.x&&d.y===this.offset.y||(this.rowFocus.y-=d.y-this.offset.y,this.rowFocus.cellY-=d.y-this.offset.y,this.rowFocus.fixed||(this.rowFocus.x-=d.x-this.offset.x,this.rowFocus.cellX-=d.x-this.offset.x),this.rowFocus.offset=a()({},this.offset))}return{displayColumns:t,displayRows:e,displayCells:i,displayFixedCells:n}},getDisplayRows:function(){var t=this,e=this.offset.y,i=this.originPoint,n=this.maxPoint,s=this.allRows,l=this.toolbarHeight,r=[],a=i.y+e+l,h=!0,c=!1,f=void 0;try{for(var u,x=d()(s);!(h=(u=x.next()).done);h=!0){var p=u.value;if(a+p.height>i.y+l&&a<n.y){var v=o()({},p,{y:a});r.push(v)}else if(a>=n.y)break;a+=p.height}}catch(t){c=!0,f=t}finally{try{!h&&x.return&&x.return()}finally{if(c)throw f}}return setTimeout(function(){t.displayRows=[].concat(r)},0),r},getDisplayCells:function(t,e){var i=this,n=[],s=this.allCells,l=this.fillWidth,r=this.setCellRenderText,a=!0,h=!1,c=void 0;try{for(var f,u=d()(t);!(a=(f=u.next()).done);a=!0){var x=f.value,p=[],v=!0,y=!1,_=void 0;try{for(var g,m=d()(e);!(v=(g=m.next()).done);v=!0){var w=g.value,b=s[x.rowIndex][w.cellIndex];b.renderText&&(b=r(b)),b.renderButton&&(b.buttons=w.renderButton(this.data[b.rowIndex],b.rowIndex));var C=o()({},b,{x:w.x,y:x.y,width:b.width+l,height:x.height});p.push(C)}}catch(t){y=!0,_=t}finally{try{!v&&m.return&&m.return()}finally{if(y)throw _}}n.push(p)}}catch(t){h=!0,c=t}finally{try{!a&&u.return&&u.return()}finally{if(h)throw c}}return setTimeout(function(){i.displayCells=[].concat(n)},0),n},getDisplayFixedCells:function(t){var e=this,i=[],n=this.allFixedCells,s=this.fillWidth,l=!0,r=!1,a=void 0;try{for(var h,c=d()(n);!(l=(h=c.next()).done);l=!0){var f=h.value,u=[],x=!0,p=!1,v=void 0;try{for(var y,_=d()(t);!(x=(y=_.next()).done);x=!0){var g=y.value,m=f[g.rowIndex];m.renderButton&&(m.buttons=m.renderButton(this.data[m.rowIndex],m.rowIndex));var w=o()({},m,{y:g.y,width:m.width+s,height:g.height});u.push(w)}}catch(t){p=!0,v=t}finally{try{!x&&_.return&&_.return()}finally{if(p)throw v}}i.push(u)}}catch(t){r=!0,a=t}finally{try{!l&&c.return&&c.return()}finally{if(r)throw a}}return setTimeout(function(){e.displayallFixedCells=[].concat(i)},0),i},freshFocusCell:function(t,e,i,n){var o=i[0].rowIndex,s=i[i.length-1].rowIndex;t>=o&&t<=s&&(this.focusCell.height=i[t-o].height);var l=!0,r=!1,a=void 0;try{for(var h,c=d()(n);!(l=(h=c.next()).done);l=!0){var f=h.value;f.cellIndex===e&&(this.focusCell.width=f.width)}}catch(t){r=!0,a=t}finally{try{!l&&c.return&&c.return()}finally{if(r)throw a}}},focusCellByOriginCell:function(t){var e=!0,i=!1,n=void 0;try{for(var s,l=d()(this.displayCells);!(e=(s=l.next()).done);e=!0){var r=s.value,h=!0,c=!1,f=void 0;try{for(var u,x=d()(r);!(h=(u=x.next()).done);h=!0){var p=u.value;if(p.rowIndex===t.rowIndex&&p.key===t.key){var v=o()({},p,{offset:a()({},this.offset)});return this.focusCell=v,this.rowFocus={cellX:v.x,cellY:v.y,rowIndex:this.focusCell.rowIndex,offset:a()({},this.offset)},this.paintFocusCell(v),v}}}catch(t){c=!0,f=t}finally{try{!h&&x.return&&x.return()}finally{if(c)throw f}}}}catch(t){i=!0,n=t}finally{try{!e&&l.return&&l.return()}finally{if(i)throw n}}return null}}}},XWFe:function(t,e,i){"use strict";e.a={data:function(){return{horizontalBar:{x:0,size:0,move:!1,cursorX:0,k:1},verticalBar:{y:0,size:0,move:!1,cursorY:0,k:1}}},created:function(){var t=this;this.$on("scroll",function(){t.horizontalBar.x=-parseInt(t.offset.x*t.horizontalBar.k,10),t.verticalBar.y=-parseInt(t.offset.y*t.verticalBar.k,10)})},mounted:function(){},methods:{scroll:function(t,e){if(e&&this.verticalBar.size)if(t.offsetY<this.verticalBar.y){var i=15;this.verticalBar.y-t.offsetY<15&&(i=this.verticalBar.y-t.offsetY),this.verticalBar.y-=i,this.offset.y=-this.verticalBar.y/this.verticalBar.k,requestAnimationFrame(this.rePainted)}else if(t.offsetY>this.verticalBar.y+this.verticalBar.size){var n=15;t.offsetY-this.verticalBar.y-this.verticalBar.size<15&&(n=t.offsetY-this.verticalBar.y-this.verticalBar.size),this.verticalBar.y+=n,this.offset.y=-this.verticalBar.y/this.verticalBar.k,requestAnimationFrame(this.rePainted)}if(0===e&&this.horizontalBar.size)if(t.offsetX<this.horizontalBar.x){var o=15;this.horizontalBar.x-t.offsetX<15&&(o=this.horizontalBar.x-t.offsetX),this.horizontalBar.x-=o,this.offset.x=-this.horizontalBar.x/this.horizontalBar.k,requestAnimationFrame(this.rePainted)}else if(t.offsetX>this.horizontalBar.x+this.horizontalBar.size){var s=15;t.offsetX-this.horizontalBar.x-this.horizontalBar.size<15&&(s=t.offsetX-this.horizontalBar.x-this.horizontalBar.size),this.horizontalBar.x+=s,this.horizontalBar.x+=15,this.offset.x=-this.horizontalBar.x/this.horizontalBar.k,requestAnimationFrame(this.rePainted)}},dragMove:function(t,e){e?(this.verticalBar.move=!0,this.verticalBar.cursorY=t.screenY):(this.horizontalBar.move=!0,this.horizontalBar.cursorX=t.screenX)},resetScrollBar:function(t,e,i,n){var o=t.x,s=t.y,l=0;l=this.fillWidth>0?o:o+n;var r=l/e;this.horizontalBar.size=r>=1?0:l-(e-l)*r,this.horizontalBar.k=r;var a=s/i;a>1?this.verticalBar.size=0:(this.verticalBar.size=s-(i-s)*a,this.verticalBar.size<30&&(this.verticalBar.size=30,a=(s-30)/(i-s))),this.verticalBar.k=a,l-this.horizontalBar.size<-this.offset.x*this.horizontalBar.k&&(this.offset.x=l-this.bodyWidth),this.verticalBar.k>1?this.offset.y=0:this.maxPoint.y-this.verticalBar.size<-this.offset.y*this.verticalBar.k&&(this.offset.y=this.maxPoint.y-this.bodyHeight),this.horizontalBar.x=-this.offset.x*this.horizontalBar.k,this.verticalBar.y=-this.offset.y*this.verticalBar.k}}}},ZBat:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAABXUlEQVRoQ+2ZwVEDMQxFJTdACYQOQgWkA9KFvSeSTrh51QVUACVsCUkHoQGL2SMzMfMVYrOZUc5//PXft3JYM934j298fvIA/92gN7DoBkRkq6ovzLzpPaiqHph5KqXsh2E41PyrVyjnvAkhfPQe/IzfqZTyWAtRDSAin0T0tIAApKrvKaXtuVl+C6BLGH6eYb5OKaWHPwWIMXb9xxKRHwBr/nADHsB4H70BlIARLCxH/X0HYKRGoTeAEjCCheWov+8AjNQo9AZQAkawsBz19x2AkRqF3gBKwAgWlqP+vgMwUqPQG0AJGMHCctTfdwBGahR6AygBI1hYjvr7DsBIjUJvQERORHRnBNdKfowxrkwfd8dxfGPm51YTWc696PN6znkVQpgW0MJXKWVtfuCYCc0hmPmVmddEdG+hdgXtUVUnVd1d9MR0hQG6HNH10aJFIg/QgqrlTG/AQquF9huB5SxAQNMDWAAAAABJRU5ErkJggg=="},cMfR:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAB7klEQVRoQ+2ZQVLCMBSG/+foiszoDYQTyA1ELqLcANdlwULWjiegXqRwBU8gnEAc6gqG50TpDNQEG/pagpYlTZPve38mTRvCkf/oyPlRCRw6wSoBrxNo9fni5CweMqNFRBdlwjIwIWC8WtTux32a2ca2TiENT6fxa9ngaVBmnvFSNWwSVoGbhzgkwm2ZVbeNxYznUU/dma7vEJi/Hbr6CbCeTqNANZwE2oOYfah+whAFylhsawKVgHB83ifAjBcCQhAeTe5eC2h4XtZaeqm0rX7eCmzCJ5U3SXgpYILXEu1BPASwte57J+ACr6W8EnCF90pgH3hvBPaFFxXQGysATSJcuTyr8sCLCSS7wu+t9sc4q0ReeBGB9JY2q4QEvIgAgDAKVGdz2vwmIQUvJaD7ySwhCS8poPt6igLV3ZWENLy0gO6vEwUqNEno/5KN2eZ10/bAZRUr4klslNBQ6RfwvPBFJJAU74dEuqoS8EUKGKdTIiEFX7SAUUISvgyBLQlp+LIEviQAXKdfRlxWG1vbIlYhCa7MfVQCmUtVUMP/mMB8BtB5QQV165YxjXqqbrrp735eX5/OTA6fAr+vFqrufMCh41qf0oQEaoJw6ZZ7ztaMKQNjXta6ex0x5Ry+tNurY9bSSm0ZqEqgSiBnBT4BkfqPQMORwUwAAAAASUVORK5CYII="},cqsg:function(t,e,i){e=t.exports=i("FZ+f")(!1),e.push([t.i,'\n*[data-v-d16fdd66] {\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n.excel-table[data-v-d16fdd66] {\n  border: 1px solid #d4d4d4;\n  position: relative;\n  min-width: 714px;\n}\n.excel-table .toolbar[data-v-d16fdd66] {\n    position: absolute;\n    background-color: #f9f9f9;\n    height: 29px;\n    width: 100%;\n}\n.excel-table .toolbar .toolbar__focus[data-v-d16fdd66] {\n      height: 30px;\n      border-right: 1px solid #d4d4d4;\n      line-height: 30px;\n      text-align: center;\n      font-size: 14px;\n      display: inline-block;\n}\n.excel-table .toolbar .toobar__fx[data-v-d16fdd66] {\n      display: inline-block;\n      vertical-align: top;\n      width: 415px;\n}\n.excel-table .toolbar .toobar__fx label[data-v-d16fdd66] {\n        width: 70px;\n        display: inline-block;\n        height: 30px;\n        line-height: 30px;\n        font-size: 12px;\n        text-align: right;\n}\n.excel-table .toolbar .toobar__fx .toobar__fx-tip[data-v-d16fdd66] {\n        color: #e0000b;\n        font-size: 12px;\n        display: inline-block;\n        width: 60px;\n}\n.excel-table .toolbar .toobar__fx .toobar__fx-content[data-v-d16fdd66] {\n        display: inline-block;\n        vertical-align: top;\n}\n.excel-table .toolbar .toobar__fx .toobar__fx-content input[data-v-d16fdd66] {\n          width: 270px;\n          outline: none;\n          border-top: none;\n          border-bottom: none;\n          border-left: 1px solid #d4d4d4;\n          border-right: 1px solid #d4d4d4;\n          height: 29px;\n          line-height: 29px;\n          padding: 5px 15px;\n          font-size: 12px;\n}\n.excel-table .toobar__rate[data-v-d16fdd66] {\n    display: inline-block;\n    vertical-align: top;\n}\n.excel-table .toobar__rate label[data-v-d16fdd66] {\n      font-size: 12px;\n      line-height: 30px;\n      margin-right: 15px;\n}\n.excel-table .toobar__rate label span[data-v-d16fdd66] {\n        color: #03a2fe;\n}\n.excel-table .toobar__rate label.help[data-v-d16fdd66] {\n      background-color: #999;\n      color: #fff;\n      font-weight: 900;\n      width: 20px;\n      display: inline-block;\n      text-align: center;\n      line-height: 20px;\n      border-radius: 10px;\n      cursor: pointer;\n      position: relative;\n}\n.excel-table .toobar__rate label.help .help-content[data-v-d16fdd66] {\n        display: none;\n        position: absolute;\n        background-color: #fff;\n        border: 1px solid #ddd;\n        -webkit-box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.3);\n                box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.3);\n        color: #666;\n        width: 275px;\n        text-align: left;\n        padding-left: 10px;\n        left: -240px;\n        top: 24px;\n        z-index: 11;\n}\n.excel-table .toobar__rate label.help[data-v-d16fdd66]:before {\n        content: " ";\n        display: none;\n        position: absolute;\n        width: 10px;\n        height: 10px;\n        background-color: #fff;\n        -webkit-transform: rotate(45deg);\n                transform: rotate(45deg);\n        top: 22px;\n        right: 6px;\n        z-index: 10;\n        border: 1px solid #ddd;\n        -webkit-box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.3);\n                box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.3);\n}\n.excel-table .toobar__rate label.help[data-v-d16fdd66]:after {\n        content: " ";\n        display: none;\n        position: absolute;\n        width: 10px;\n        height: 10px;\n        background-color: #fff;\n        -webkit-transform: rotate(45deg);\n                transform: rotate(45deg);\n        top: 22px;\n        right: 6px;\n        z-index: 12;\n}\n.excel-table .toobar__rate label.help:hover .help-content[data-v-d16fdd66] {\n        display: block;\n}\n.excel-table .toobar__rate label.help[data-v-d16fdd66]:hover:after {\n        display: inline-block;\n}\n.excel-table .toobar__rate label.help[data-v-d16fdd66]:hover:before {\n        display: inline-block;\n}\n.excel-table .horizontal-container[data-v-d16fdd66] {\n    position: absolute;\n    height: 18px;\n    left: 0;\n    bottom: 0;\n    background: #f1f1f1;\n    -webkit-user-select: none;\n       -moz-user-select: none;\n        -ms-user-select: none;\n            user-select: none;\n}\n.excel-table .horizontal-container .scroll-bar-horizontal[data-v-d16fdd66] {\n      position: absolute;\n      bottom: 1px;\n      height: 16px;\n      padding: 0 2px;\n}\n.excel-table .horizontal-container .scroll-bar-horizontal > div[data-v-d16fdd66] {\n        width: 100%;\n        height: 16px;\n}\n.excel-table .vertical-container[data-v-d16fdd66] {\n    -webkit-user-select: none;\n       -moz-user-select: none;\n        -ms-user-select: none;\n            user-select: none;\n    position: absolute;\n    width: 18px;\n    top: 0;\n    right: 0;\n    background: #f1f1f1;\n}\n.excel-table .vertical-container .scroll-bar-vertical[data-v-d16fdd66] {\n      position: absolute;\n      right: 1px;\n      width: 16px;\n      padding: 2px 0;\n}\n.excel-table .vertical-container .scroll-bar-vertical > div[data-v-d16fdd66] {\n        width: 16px;\n        height: 100%;\n}\n.excel-table .input-content[data-v-d16fdd66] {\n    padding: 5px;\n    top: -10000px;\n    left: -10000px;\n    outline: none;\n    -webkit-box-shadow: rgba(0, 0, 0, 0.4) 0px 2px 5px;\n            box-shadow: rgba(0, 0, 0, 0.4) 0px 2px 5px;\n    border: 2px solid #4285f4;\n    color: #666;\n    border-radius: 0px;\n    font-size: 12px;\n    position: fixed;\n    background-color: #fff;\n    z-index: 10;\n}\n.excel-table .focus-area[data-v-d16fdd66] {\n    display: none;\n    border: 2px solid #4285f4;\n    top: -10000px;\n    left: -10000px;\n    position: absolute;\n    z-index: 5;\n}\n.excel-table .select-area[data-v-d16fdd66] {\n    z-index: 5;\n    display: none;\n    border: 1px solid #03a2fe;\n    top: -10000px;\n    left: -10000px;\n    background-color: rgba(160, 195, 255, 0.2);\n    position: absolute;\n    -webkit-transition: 0.1s all;\n    transition: 0.1s all;\n}\n.excel-table canvas[data-v-d16fdd66] {\n    -webkit-user-select: none;\n       -moz-user-select: none;\n        -ms-user-select: none;\n            user-select: none;\n    background-color: #fff;\n}\n.excel-table .column-set[data-v-d16fdd66] {\n    position: absolute;\n    width: 150px;\n    background-color: #fff;\n    -webkit-box-shadow: rgba(0, 0, 0, 0.4) 0px 2px 5px;\n            box-shadow: rgba(0, 0, 0, 0.4) 0px 2px 5px;\n    left: 71px;\n    padding: 0 8px;\n    font-size: 12px;\n    color: #495060;\n}\n.excel-table .column-set .column-set__title[data-v-d16fdd66] {\n      height: 30px;\n      line-height: 30px;\n      border-bottom: 1px solid #ddd;\n}\n.excel-table .column-set .column-set__content[data-v-d16fdd66] {\n      overflow: auto;\n      padding: 5px;\n      color: #495060;\n}\n.excel-table .column-set .column-set__content ul[data-v-d16fdd66] {\n        margin: 0;\n        padding: 0;\n        list-style: none;\n}\n.excel-table .column-set .column-set__content ul li[data-v-d16fdd66] {\n          font-size: 12px;\n          height: 30px;\n          line-height: 30px;\n}\n.excel-table .column-set .column-set__footer[data-v-d16fdd66] {\n      height: 40px;\n      line-height: 40px;\n      border-top: 1px solid #ddd;\n      text-align: right;\n}\n.excel-table button[data-v-d16fdd66] {\n    height: 25px;\n    width: 56px;\n    line-height: 24px;\n    background-color: #fff;\n    border: 1px solid #ddd;\n    outline: none;\n    cursor: pointer;\n    color: #333;\n}\n.excel-table button[data-v-d16fdd66]:hover {\n      background-color: #f9f9f9;\n}\n.excel-table button[data-v-d16fdd66]:active {\n      background-color: #f5f5f5;\n}\n.excel-table .tip[data-v-d16fdd66] {\n    position: absolute;\n    width: 300px;\n    top: 10px;\n    right: 30px;\n    background-color: #fff;\n    -webkit-box-shadow: rgba(0, 0, 0, 0.4) 0px 2px 5px;\n            box-shadow: rgba(0, 0, 0, 0.4) 0px 2px 5px;\n    padding: 10px 10px 10px 50px;\n    word-wrap: break-word;\n    font-size: 12px;\n    color: #666;\n}\n.excel-table .tip .tip-icon[data-v-d16fdd66] {\n      position: absolute;\n      display: inline-block;\n      width: 20px;\n      height: 20px;\n      background-size: 100%;\n      left: 15px;\n}\n.excel-table .slide-fade-enter-active[data-v-d16fdd66] {\n    -webkit-transition: all 0.2s ease;\n    transition: all 0.2s ease;\n}\n.excel-table .slide-fade-leave-active[data-v-d16fdd66] {\n    -webkit-transition: all 0.1s cubic-bezier(1, 0.5, 0.8, 1);\n    transition: all 0.1s cubic-bezier(1, 0.5, 0.8, 1);\n}\n.excel-table .slide-fade-enter[data-v-d16fdd66],\n  .excel-table .slide-fade-leave-to[data-v-d16fdd66] {\n    -webkit-transform: translateX(10px);\n            transform: translateX(10px);\n    opacity: 0;\n}\n.excel-table .select-tip-btn[data-v-d16fdd66] {\n    z-index: 10;\n    position: absolute;\n    width: 70px;\n    border: 1px solid #bbb;\n    -webkit-box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.2);\n            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.2);\n}\n',""])},ddql:function(t,e){},eOx0:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAuUlEQVRYR+2W4QkCMQyFky6gI+gGJV3IDdQJPDfQDZzozaAbuEGlICIHHuQh1/uR/G6bj5fHa1Q6l3buLwFAKZBzXqeUTiKye4/wBuDIjJMCMLOLqu6/G9ZazwAGLwQFUEp5ishqBHAHsO0J8ACwmQXAzAZVbR741KwjaF0bxMiE7vm3dygPeGWeOh8AlAJLDaIrgIPXH5QCEUQRRF6jRRD9XYGlBlFsRLERxUZEBST1HVOdflzqDvACzBd+IfZbdZ0AAAAASUVORK5CYII="},faUi:function(t,e,i){"use strict";var n=i("woOf"),o=i.n(n),s=i("BO1k"),l=i.n(s),r=i("Dd8w"),a=i.n(r),h=i("uY1a"),d=i.n(h);e.a={data:function(){return{rowFocus:null,isFirefox:!1,pixelRatio:1,shiftDown:!1,ctrlDown:!1}},created:function(){this.isFirefox="undefined"!=typeof navigator&&navigator.userAgent.toLowerCase().indexOf("firefox")>-1},watch:{retract:function(){this.handleResize()}},mounted:function(){this.pixelRatio=window.devicePixelRatio},methods:{removeEvent:function(){window.removeEventListener("mousedown",this.handleMousedown,!1),window.removeEventListener("mousemove",d()(16,this.handleMousemove),!0),window.removeEventListener("mouseup",this.handleMouseup,!1),window.removeEventListener("resize",this.handleResize,!1),window.removeEventListener(this.isFirefox?"DOMMouseScroll":"mousewheel",this.handleWheel),window.removeEventListener("keydown",this.handleKeydown,!1),window.removeEventListener("keyup",this.handleKeyup,!1)},initEvent:function(){window.addEventListener("mousedown",this.handleMousedown,!1),window.addEventListener("mousemove",d()(16,this.handleMousemove),!0),window.addEventListener("mouseup",this.handleMouseup,!1),window.addEventListener("resize",this.handleResize,!1),window.addEventListener(this.isFirefox?"DOMMouseScroll":"mousewheel",this.handleWheel),window.addEventListener("keydown",this.handleKeydown,!1),window.addEventListener("keyup",this.handleKeyup,!1),this.$refs.canvas.addEventListener("dblclick",this.handleDoubleClick,!1),this.$refs.canvas.addEventListener("click",this.handleClick,!1)},handleMousedown:function(t){var e=this;this.save();var i=!1;"CANVAS"===t.target.tagName?setTimeout(function(){e.isDown=!0,e.hideInput(),e.selectArea=null,e.isSelect=!1,e.multiSelect=null,e.isMultiSelect=!1;var i=t.offsetX,n=t.offsetY;if(i>e.originPoint.x&&n>e.rowHeight&&i<e.maxPoint.x){var o=e.getCellAt(i,n);if(o&&!o.buttons&&!o.readOnly)if(e.shiftDown){var s=e.focusCell,l=s.x,r=s.y,h=s.width,d=s.height,c=s.rowIndex,f=s.cellIndex;i>=l&&i<=l+h&&n>=r&&n<=r+d?(e.selectArea=null,e.isSelect=!1,e.rePainted()):(o.x>=l&&o.y>=r?e.selectArea={x:l,y:r,width:o.x-l+o.width,height:o.y-r+o.height,cellIndex:f,rowIndex:c,offset:a()({},e.offset)}:o.x>=l&&o.y<=r?e.selectArea={x:l,y:o.y,width:o.x-l+o.width,height:r-o.y+d,rowIndex:o.rowIndex,cellIndex:f,offset:a()({},e.offset)}:o.x<=l&&o.y<=r?e.selectArea={x:o.x,y:o.y,width:l-o.x+h,height:r-o.y+d,rowIndex:o.rowIndex,cellIndex:o.cellIndex,offset:a()({},e.offset)}:o.x<=l&&o.y>=r&&(e.selectArea={x:o.x,y:r,width:l-o.x+h,height:o.y-r+o.height,rowIndex:c,cellIndex:o.cellIndex,offset:a()({},e.offset)}),e.selectArea.rowCount=Math.abs(o.rowIndex-c)+1,e.isSelect=!0,e.rePainted())}else e.focusCell=o,e.paintFocusCell(o),e.$emit("focus",o.rowData),e.calculateRate([o.rowData])}},0):"BUTTON"===t.target.tagName||t.target.classList.contains("input-content")||"CANVAS"!==t.target.tagName&&(this.isEditing&&(this.save(),this.hideInput(),i=!0),this.isSelect&&(this.selectArea=null,this.isSelect=!1,i=!0),this.showColumnSet&&setTimeout(function(){-1===t.path.indexOf(e.$refs.columnSet)&&(e.showColumnSet=!1,e.initSize())},0),i&&this.rePainted())},handleMousemove:function(t){if(this.isDown&&this.isFocus&&"CANVAS"===t.target.tagName){var e=t.offsetX,i=t.offsetY,n=this.focusCell,o=n.x,s=n.y,l=n.width,r=n.height,h=n.rowIndex,d=n.cellIndex;if(e>=o&&e<=o+l&&i>=s&&i<=s+r)this.selectArea&&(this.selectArea=null,this.isSelect=!1,this.rePainted());else{var c=this.getCellAt(e,i);c&&(c.x>=o&&c.y>=s?this.selectArea={x:o,y:s,width:c.x-o+c.width,height:c.y-s+c.height,cellIndex:d,rowIndex:h,offset:a()({},this.offset)}:c.x>=o&&c.y<=s?this.selectArea={x:o,y:c.y,width:c.x-o+c.width,height:s-c.y+r,rowIndex:c.rowIndex,cellIndex:d,offset:a()({},this.offset)}:c.x<=o&&c.y<=s?this.selectArea={x:c.x,y:c.y,width:o-c.x+l,height:s-c.y+r,rowIndex:c.rowIndex,cellIndex:c.cellIndex,offset:a()({},this.offset)}:c.x<=o&&c.y>=s&&(this.selectArea={x:c.x,y:s,width:o-c.x+l,height:c.y-s+c.height,rowIndex:h,cellIndex:c.cellIndex,offset:a()({},this.offset)}),this.selectArea.rowCount=Math.abs(c.rowIndex-h)+1,this.isSelect=!0,this.rePainted())}}if(this.verticalBar.move){var f=this.maxPoint.y-this.verticalBar.size,u=this.verticalBar.y+(t.screenY-this.verticalBar.cursorY);u>0&&u<f?this.verticalBar.y+=t.screenY-this.verticalBar.cursorY:this.verticalBar.y=u<=0?0:f,this.verticalBar.cursorY=t.screenY,this.offset.y=-this.verticalBar.y/this.verticalBar.k,requestAnimationFrame(this.rePainted)}if(this.horizontalBar.move){var x=0;x=this.fillWidth>0?this.maxPoint.x-this.horizontalBar.size:this.maxPoint.x+this.fixedWidth-this.horizontalBar.size;var p=this.horizontalBar.x+(t.screenX-this.horizontalBar.cursorX);p>0&&p<x?this.horizontalBar.x+=t.screenX-this.horizontalBar.cursorX:this.horizontalBar.x=p<=0?0:x,this.horizontalBar.cursorX=t.screenX,this.offset.x=-this.horizontalBar.x/this.horizontalBar.k,requestAnimationFrame(this.rePainted)}},handleMouseup:function(){this.isDown=!1,this.horizontalBar.move=!1,this.verticalBar.move=!1},handleResize:function(){this.selectArea=null,this.isSelect=!1,this.save(),this.hideInput(),this.initSize()},handleWheel:function(t){if("CANVAS"===t.target.tagName&&!this.isEditing){var e=t.deltaX,i=t.deltaY;if(Math.abs(e)>Math.abs(i)){var n=this.offset.x,o=0;o=this.fillWidth>0?this.maxPoint.x:this.maxPoint.x+this.fixedWidth,this.offset.x-e>0?this.offset.x=0:this.bodyWidth-o+this.offset.x<e?(this.offset.x=o-this.bodyWidth,o-this.bodyWidth<0?this.offset.x=o-this.bodyWidth:(t.preventDefault(),t.returnValue=!1)):(t.preventDefault(),t.returnValue=!1,this.offset.x-=e),n!==this.offset.x&&(requestAnimationFrame(this.rePainted),this.$emit("scroll"))}else{var s=this.offset.y;s-i>0?this.offset.y=0:this.bodyHeight-this.maxPoint.y+s<i?this.maxPoint.y-this.bodyHeight<0?this.offset.y=this.maxPoint.y-this.bodyHeight:(t.preventDefault(),t.returnValue=!1):(t.preventDefault(),t.returnValue=!1,this.offset.y-=i),s!==this.offset.y&&(requestAnimationFrame(this.rePainted),this.$emit("scroll"))}}},handleColumnSet:function(){this.showColumnSet=!1,this.focusCell=null,this.isFocus=!1,this.initSize()},handleClick:function(t){if(!this.isSelect){var e=t.offsetX,i=t.offsetY;if(e>this.maxPoint.x&&i>this.maxPoint.y&&e<this.width&&i<this.height&&this.fullScreen(),this.showCheckbox&&e>this.serialWidth&&e<this.originPoint.x){var n=this.getCheckboxAt(e,i);if(n)-1!==this.selected.indexOf(n.rowIndex)?this.selected.splice(this.selected.findIndex(function(t){return t===n.rowIndex}),1):this.selected.push(n.rowIndex),this.rePainted();else if(e>this.serialWidth+5&&e<this.serialWidth+5+20&&i>5+this.toolbarHeight&&i<25+this.toolbarHeight){if(this.selected.length===this.allRows.length)this.selected=[];else{this.selected=[];var o=!0,s=!1,r=void 0;try{for(var h,d=l()(this.allRows);!(o=(h=d.next()).done);o=!0){var c=h.value;this.selected.push(c.rowIndex)}}catch(t){s=!0,r=t}finally{try{!o&&d.return&&d.return()}finally{if(s)throw r}}}this.rePainted()}return}if(this.columnSet)if(this.showColumnSet)this.handleColumnSet();else if(e>55&&e<64&&i>7+this.toolbarHeight&&i<23+this.toolbarHeight)return void(this.showColumnSet=!0);var f=this.getHeadWord(e,i);f&&(this.offset.y=0,this.multiSelect={x:f.x,y:this.toolbarHeight+this.rowHeight,width:f.width,height:this.maxPoint.y-(this.toolbarHeight+this.rowHeight),cellIndex:f.cellIndex,offset:a()({},this.offset)},this.isMultiSelect=!0,this.focusCell=a()({},this.allCells[0][f.cellIndex],{height:this.allRows[0].height,offset:a()({},this.offset),x:f.x,y:this.toolbarHeight+this.rowHeight+this.offset.y}),this.isFocus=!0,this.rePainted());var u=this.getButtonAt(e,i);u&&(this.rowFocus=u,u.click(this.data[u.rowIndex],u.rowIndex),this.rePainted())}},handleDoubleClick:function(t){var e=t.offsetX,i=t.offsetY;if(this.focusCell&&e>this.focusCell.x&&e<this.focusCell.x+this.focusCell.width&&i>this.focusCell.y&&i<this.focusCell.y+this.focusCell.height){var n=this.focusCell,o=n.x,s=n.y,l=n.width,r=n.height,a=n.content;this.$refs.input.innerHTML=a,this.keepLastIndex(this.$refs.input),this.showInput(o,s,l,r)}},handleKeydown:function(t){if(this.isFocus){if(!this.isEditing)if(this.fxFocus||(38===t.keyCode?(t.preventDefault(),this.moveFocus("up")):40===t.keyCode?(t.preventDefault(),this.moveFocus("down")):37===t.keyCode?(t.preventDefault(),this.moveFocus("left")):39===t.keyCode&&(t.preventDefault(),this.moveFocus("right"))),16===t.keyCode)this.shiftDown=!0;else if(8===t.keyCode||46===t.keyCode)if(this.isSelect){var e=this.getCellsBySelect(this.selectArea),i=[],n=!0,o=!1,s=void 0;try{for(var r,a=l()(e);!(n=(r=a.next()).done);n=!0){var h=r.value,d={rowData:h[0].rowData,index:h[0].rowIndex,items:[]},c=!0,f=!1,u=void 0;try{for(var x,p=l()(h);!(c=(x=p.next()).done);c=!0){var v=x.value;v.readOnly?d.items.push({key:"",value:""}):d.items.push({key:v.key,value:""})}}catch(t){f=!0,u=t}finally{try{!c&&p.return&&p.return()}finally{if(f)throw u}}i.push(d)}}catch(t){o=!0,s=t}finally{try{!n&&a.return&&a.return()}finally{if(o)throw s}}this.$emit("update",i)}else this.fxFocus||this.$emit("updateItem",{index:this.focusCell.rowIndex,key:this.focusCell.key,value:""});else/macintosh|mac os x/i.test(navigator.userAgent)?90===t.keyCode&&t.metaKey?(t.preventDefault(),this.$emit("history_back")):89===t.keyCode&&t.metaKey?(t.preventDefault(),this.$emit("history_forward")):67===t.keyCode&&t.metaKey&&this.isSelect&&(t.preventDefault(),this.selectText(this.$refs.inputSelect),document.execCommand("Copy")):90===t.keyCode&&t.ctrlKey?(t.preventDefault(),this.$emit("history_back")):89===t.keyCode&&t.ctrlKey?(t.preventDefault(),this.$emit("history_forward")):67===t.keyCode&&t.ctrlKey&&this.isSelect&&(t.preventDefault(),this.selectText(this.$refs.inputSelect),document.execCommand("Copy"));13===t.keyCode?this.fxFocus||(this.save(),this.moveFocus("down")):27===t.keyCode?(this.hideInput(),this.$refs.input.innerHTML=""):9===t.keyCode&&(this.fxFocus||(this.save(),this.moveFocus("right")))}},handleKeyup:function(t){16===t.keyCode&&(this.shiftDown=!1)},moveFocus:function(t){if(this.focusCell){this.isSelect&&(this.selectArea=null,this.isSelect=!1),this.isMultiSelect&&(this.multiSelect=null,this.isMultiSelect=!1);var e=this.focusCell.rowIndex,i=this.focusCell.cellIndex;if(this.hideInput(),"up"===t)if(0!==this.getDisplayCellIndexByRowIndex(e))this.focusCell=o()({},this.getDisplayCellByRowIndex(this.displayCells,e-1,i),{offset:a()({},this.offset)}),this.focusCell.y<this.originPoint.y&&(this.offset.y+=this.originPoint.y-this.focusCell.y),this.paintFocusCell(this.focusCell);else{var n=this.displayRows[0].rowIndex;if(n>0){this.offset.y+=this.allRows[this.displayRows[0].rowIndex-1].height;var s=this.rePainted(),l=s.displayCells;this.focusCell=o()({},this.getDisplayCellByRowIndex(l,l[0][0].rowIndex,i),{offset:a()({},this.offset)}),this.paintFocusCell(this.focusCell)}}else if("down"===t)if(e!==this.displayCells[this.displayCells.length-1][0].rowIndex)this.focusCell=o()({},this.getDisplayCellByRowIndex(this.displayCells,e+1,i),{offset:a()({},this.offset)}),this.focusCell.y+this.focusCell.height>this.maxPoint.y&&(this.offset.y-=this.focusCell.y+this.focusCell.height-this.maxPoint.y),this.paintFocusCell(this.focusCell);else{var r=this.displayRows[this.displayRows.length-1].rowIndex;if(r<this.allRows.length-1){this.offset.y-=this.allRows[this.displayRows[this.displayRows.length-1].rowIndex+1].height;var h=this.rePainted(),d=h.displayCells;this.focusCell=o()({},this.getDisplayCellByRowIndex(d,d[d.length-1][0].rowIndex,i),{offset:a()({},this.offset)}),this.paintFocusCell(this.focusCell)}}else if("left"===t)if(i!==this.getFirstDisplayCellIndex(this.displayCells))this.focusCell=o()({},this.getDisplayCellByRowIndex(this.displayCells,e,i-1),{offset:a()({},this.offset)}),this.focusCell.x<this.originPoint.x&&(this.offset.x+=this.originPoint.x-this.focusCell.x),this.paintFocusCell(this.focusCell);else{var c=this.displayColumns[0].cellIndex;if(c>0){this.offset.x+=this.allColumns[c-1].width;var f=this.rePainted(),u=f.displayCells;this.focusCell=o()({},this.getDisplayCellByRowIndex(u,e,this.getFirstDisplayCellIndex(u)),{offset:a()({},this.offset)}),this.paintFocusCell(this.focusCell)}}else if("right"===t)if(i!==this.getLastDisplayCellIndex(this.displayCells))this.focusCell=o()({},this.getDisplayCellByRowIndex(this.displayCells,e,i+1),{offset:a()({},this.offset)}),this.focusCell.x+this.focusCell.width>this.maxPoint.x-this.fixedWidth&&(this.offset.x-=this.focusCell.x+this.focusCell.width-(this.maxPoint.x-this.fixedWidth)),this.paintFocusCell(this.focusCell);else{var x=this.displayColumns[this.displayColumns.length-1-this.displayFixedCells.length].cellIndex;if(x<this.allColumns.length-1){this.offset.x-=this.allColumns[x+1].width;var p=this.rePainted(),v=p.displayCells;this.focusCell=o()({},this.getDisplayCellByRowIndex(v,e,this.getLastDisplayCellIndex(v)),{offset:a()({},this.offset)}),this.paintFocusCell(this.focusCell)}}this.$emit("focus",this.focusCell.rowData),this.calculateRate([this.focusCell.rowData]),this.$emit("scroll")}},getDisplayCellByRowIndex:function(t,e,i){var n=!0,o=!1,s=void 0;try{for(var r,a=l()(t);!(n=(r=a.next()).done);n=!0){var h=r.value;if(h[0].rowIndex===e){var d=!0,c=!1,f=void 0;try{for(var u,x=l()(h);!(d=(u=x.next()).done);d=!0){var p=u.value;if(p.cellIndex===i)return p}}catch(t){c=!0,f=t}finally{try{!d&&x.return&&x.return()}finally{if(c)throw f}}}}}catch(t){o=!0,s=t}finally{try{!n&&a.return&&a.return()}finally{if(o)throw s}}return null},getDisplayCellIndexByRowIndex:function(t){var e=0,i=!0,n=!1,o=void 0;try{for(var s,r=l()(this.displayCells);!(i=(s=r.next()).done);i=!0){if(s.value[0].rowIndex===t)return e;e+=1}}catch(t){n=!0,o=t}finally{try{!i&&r.return&&r.return()}finally{if(n)throw o}}return null},getLastDisplayCellIndex:function(t){return t[0][t[0].length-1].cellIndex},getFirstDisplayCellIndex:function(t){return t[0][0].cellIndex},keepLastIndex:function(t){if(window.getSelection){t.focus();var e=window.getSelection();e.selectAllChildren(t),e.collapseToEnd()}else if(document.selection){var i=document.selection.createRange();i.moveToElementText(t),i.collapse(!1),i.select()}},selectText:function(t){if(document.selection){var e=document.body.createTextRange();e.moveToElementText(t),e.select()}else if(window.getSelection){var i=document.createRange();i.selectNodeContents(t),window.getSelection().removeAllRanges(),window.getSelection().addRange(i)}},paintFocusCell:function(t){t&&(this.rowFocus={cellX:t.x,cellY:t.y,rowIndex:t.rowIndex,offset:a()({},this.offset)},this.isFocus=!0,this.rePainted(),this.$refs.input.innerHTML="",this.focusInput())},focusInput:function(){var t=this;setTimeout(function(){t.$refs.input.focus()},0)}}}},i2s9:function(t,e){},ktFh:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__=__webpack_require__("Dd8w"),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_get_iterator__=__webpack_require__("BO1k"),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_get_iterator___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_get_iterator__),__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_toConsumableArray__=__webpack_require__("Gu7T"),__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_toConsumableArray___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_toConsumableArray__),__WEBPACK_IMPORTED_MODULE_3__painted__=__webpack_require__("QWnI"),__WEBPACK_IMPORTED_MODULE_4__events__=__webpack_require__("faUi"),__WEBPACK_IMPORTED_MODULE_5__calculate__=__webpack_require__("W4W1"),__WEBPACK_IMPORTED_MODULE_6__scroller__=__webpack_require__("XWFe"),__WEBPACK_IMPORTED_MODULE_7__checkbox_vue__=__webpack_require__("Qf4e"),__WEBPACK_IMPORTED_MODULE_8__history__=__webpack_require__("OnGL"),__WEBPACK_IMPORTED_MODULE_9__utils__=__webpack_require__("Cf1p");__webpack_exports__.a={mixins:[__WEBPACK_IMPORTED_MODULE_9__utils__.a,__WEBPACK_IMPORTED_MODULE_5__calculate__.a,__WEBPACK_IMPORTED_MODULE_3__painted__.a,__WEBPACK_IMPORTED_MODULE_4__events__.a,__WEBPACK_IMPORTED_MODULE_6__scroller__.a,__WEBPACK_IMPORTED_MODULE_8__history__.a],components:{checkbox:__WEBPACK_IMPORTED_MODULE_7__checkbox_vue__.a},props:{columns:Array,gridData:Array,type:{type:String,default:"default"},showCheckbox:{type:Boolean,default:!1},leftHeight:Number,showDot:Object,columnSet:{type:Boolean,default:!1},storageKey:{type:String,default:"gridStorage"},initSelected:Array,autoAddRow:{type:Boolean,default:!1},templateData:Object,showToolbar:{type:Boolean,default:!0},showRate:{type:Boolean,default:!1}},data:function(){return{keys:{37:1,38:1,39:1,40:1},ctx:null,isDown:!1,isEditing:!1,isSelect:!1,isFocus:!1,isMultiSelect:!1,selectArea:null,focusCell:null,multiSelect:null,currentText:"",inputStyles:{},valueTemp:"",data:null,showColumnSet:!1,ratio:1,showTip:!1,tipMessage:"",isPaste:!1,initRows:300,fxContent:"",fxFocus:!1,input:"",fxTip:"",sumRate:0,rate:0}},computed:{showBatchEditBtn:function(){return!!this.isSelect&&!(this.selectArea.width>this.allColumns[this.selectArea.cellIndex].width)},batchEditStyle:function(){var t=this.selectArea,e=t.x,i=t.y,n=t.width,o=t.height,s=i;return i<90&&(s=90),i+o<90&&(s=-90),{left:e+n+2+"px",top:s+"px"}}},watch:{gridData:function(t){this.data=[].concat(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_toConsumableArray___default()(t)),this.initCanvas(),this.painted(this.initDisplayItems()),this.initEvent()},focusCell:{handler:function(t){t&&(this.fxContent=t.content)},deep:!0},selectArea:function(t){if(t){var e=this.getCellsBySelect(this.selectArea),i="<table>",n=!0,o=!1,s=void 0;try{for(var l,r=__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_get_iterator___default()(e);!(n=(l=r.next()).done);n=!0){var a=l.value,h="<tr>",d=!0,c=!1,f=void 0;try{for(var u,x=__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_get_iterator___default()(a);!(d=(u=x.next()).done);d=!0){h+="<td>"+u.value.content+"</td>"}}catch(t){c=!0,f=t}finally{try{!d&&x.return&&x.return()}finally{if(c)throw f}}h+="</tr>",i+=h}}catch(t){o=!0,s=t}finally{try{!n&&r.return&&r.return()}finally{if(o)throw s}}i+="</table>",this.$refs.inputSelect.innerHTML=i}},fxContent:function(t){""+t&&(""+t).indexOf("=")}},created:function(){var t=this;this.data=[].concat(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_toConsumableArray___default()(this.gridData)),this.$on("updateNoSave",function(e){t.saveItems(e,!1)}),this.$on("update",function(e){t.$emit("updateValue",t.saveItems(e,!0))}),this.$on("updateItem",function(e){t.saveItem(e,!0)})},mounted:function(){this.$nextTick(function(){this.data.length>0&&(this.initCanvas(),this.initSize(),this.initEvent())})},destroyed:function(){this.removeEvent()},methods:{doPaste:function(){this.isPaste=!0},setValueTemp:function(t){this.valueTemp=t.target.innerText,this.fxContent=this.valueTemp;var e=this.focusCell,i=e.width,n=e.height,o=e.serialWidth,s=this.focusCell,l=s.x,r=s.y;if(l<o&&(this.offset.x+=o-l,l=o),r<this.rowHeight&&(this.offset.y+=this.rowHeight-r,r=this.rowHeight),this.isPaste)if(this.isEditing)this.isPaste=!1,t.target.innerHTML=t.target.innerText;else{this.isPaste=!1;var a=document.createElement("div");a.innerHTML=t.target.innerHTML;var h=a.childNodes;t.target.innerHTML="";for(var d=[],c=0;c<h.length;c+=1)if("TABLE"===h[c].tagName){var f=h[c].querySelectorAll("tr"),u=!0,x=!1,p=void 0;try{for(var v,y=__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_get_iterator___default()(f);!(u=(v=y.next()).done);u=!0){var _=v.value,g=[],m=!0,w=!1,b=void 0;try{for(var C,k=__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_get_iterator___default()(_.cells);!(m=(C=k.next()).done);m=!0){var I=C.value,A=I.innerText;A=A.replace(/^\s+|\s+$/g,""),g.push(A);var P=I.getAttribute("colspan");if(P)for(var B=1;B<P;B+=1)g.push("")}}catch(t){w=!0,b=t}finally{try{!m&&k.return&&k.return()}finally{if(w)throw b}}d.push(g)}}catch(t){x=!0,p=t}finally{try{!u&&y.return&&y.return()}finally{if(x)throw p}}}else d.push([this.valueTemp]);var T=[],D=0,R=0,E=this.focusCell.rowIndex,S=!0,W=!1,F=void 0;try{for(var M,O=__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_get_iterator___default()(d);!(S=(M=O.next()).done);S=!0){var z=M.value;if(this.autoAddRow||E<this.allRows.length){var H=this.getStartIndexByCellIndex(this.focusCell.cellIndex);if(R=H,H||0===H){for(var L=this.allColumns[H].key,K={rowData:this.autoAddRow?null:this.allCells[E][0].rowData,index:E,items:[]},U=!1,$=0;$<z.length;$+=1){U?K.items.push({key:"",value:""}):K.items.push({key:L,value:z[$]});var N=this.nextKeyByIndex(H);if(!N)break;L=N.key,H=N.index,U=N.readOnly}H-1>D&&(D=H-1),E+=1,T.push(K)}}}}catch(t){W=!0,F=t}finally{try{!S&&O.return&&O.return()}finally{if(W)throw F}}var q=0;if(E-this.focusCell.rowIndex>1||D-R>0){for(var V=R;V<=D;V+=1)this.allColumns[V].checked&&(q+=this.allColumns[V].width+this.fillWidth);this.selectArea={x:this.focusCell.x,y:this.focusCell.y,width:q,rowIndex:this.focusCell.rowIndex,cellIndex:this.focusCell.cellIndex,rowCount:Math.abs(E-this.focusCell.rowIndex),offset:__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({},this.offset)},this.isSelect=!0}this.$emit("update",T)}else this.selectArea=null,this.isSelect=!1,this.rePainted(),this.showInput(l,r,i,n)},getStartIndexByCellIndex:function(t){var e=0,i=!0,n=!1,o=void 0;try{for(var s,l=__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_get_iterator___default()(this.allColumns);!(i=(s=l.next()).done);i=!0){if(s.value.cellIndex===t)return e;e+=1}}catch(t){n=!0,o=t}finally{try{!i&&l.return&&l.return()}finally{if(n)throw o}}return null},nextKeyByIndex:function(t){for(var e=t+1;e<this.allColumns.length;e+=1)if(this.allColumns[e].checked)return{key:this.allColumns[e].key,index:e,readOnly:this.allColumns[e].readOnly};return null},validateKeyType:function(t){var e=!0,i=!1,n=void 0;try{for(var o,s=__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_get_iterator___default()(this.allColumns);!(e=(o=s.next()).done);e=!0){var l=o.value;if(l.key===t)return"number"===l.type?{type:"number",title:l.title}:{type:"string",title:l.title}}}catch(t){i=!0,n=t}finally{try{!e&&s.return&&s.return()}finally{if(i)throw n}}return{type:"string"}},save:function(){this.focusCell&&this.isEditing&&this.$refs.input.innerText!==this.allCells[this.focusCell.rowIndex][this.focusCell.cellIndex].content&&this.$emit("updateItem",{index:this.focusCell.rowIndex,key:this.focusCell.key,value:this.$refs.input.innerText})},saveItem:function(t,e){var i=t.index,n=t.key,o=t.value,s=this.validateKeyType(n);if(s){if("number"===s.type){var l=/^(([1-9][0-9]*\.[0-9][0-9]*)|([0]\.[0-9][0-9]*)|([1-9][0-9]*)|([0]{1}))$/;if(o&&!l.test(o))return void this.showTipMessage("【 "+s.title+" 】单元格只支持数字。");o||(o=null)}e&&this.pushState({type:"edit",before:__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({},t,{value:this.data[i][n]}),after:__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({},t)}),this.data[i][n]=o,this.setCellItemByKey(i,n,o),this.rePainted(),this.$emit("updateValue",[{rowData:this.data[i],items:[{key:n,value:o}]}])}},saveItems:function(t,e){var i=[],n=/^(([1-9][0-9]*\.[0-9][0-9]*)|([0]\.[0-9][0-9]*)|([1-9][0-9]*)|([0]{1}))$/,o=[],s={type:"editMore",focusCell:this.focusCell,selectArea:this.selectArea,after:[].concat(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_toConsumableArray___default()(t))};if(t.length>this.data.length)if(this.autoAddRow){for(var l=this.data.length,r=t.length-this.data.length,a=0;a<r;a+=1)this.data.push(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({},this.templateData));this.setAllCells(l),this.initRows=this.data.length}else t.splice(this.data.length,t.length-this.data.length);var h=[],d=!0,c=!1,f=void 0;try{for(var u,x=__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_get_iterator___default()(t);!(d=(u=x.next()).done);d=!0){var p=u.value,v={rowData:p.rowData,index:p.index,items:[]},y={rowData:p.rowData,items:[],index:p.index},_=!0,g=!1,m=void 0;try{for(var w,b=__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_get_iterator___default()(p.items);!(_=(w=b.next()).done);_=!0){var C=w.value,k=this.validateKeyType(C.key);if(k){if("number"===k.type){if(C.value&&!n.test(C.value)){-1===o.indexOf(k.title)&&o.push(k.title);continue}C.value||(C.value=null)}v.items.push({key:C.key,value:this.data[p.index][C.key]}),this.data[p.index][C.key]=C.value,this.setCellItemByKey(p.index,C.key,C.value),y.items.push({key:C.key,value:C.value})}}}catch(t){g=!0,m=t}finally{try{!_&&b.return&&b.return()}finally{if(g)throw m}}i.push(y),h.push(v)}}catch(t){c=!0,f=t}finally{try{!d&&x.return&&x.return()}finally{if(c)throw f}}return s.before=[].concat(h),e&&this.pushState(s),o.length>0&&this.showTipMessage("【 "+o.join(",")+" 】单元格只支持数字。"),this.rePainted(),i},handleFxInput:function(){if(this.fxTip="",0!==this.fxContent.indexOf("=")&&!this.focusCell.readOnly)if(this.multiSelect){for(var t=[],e=0;e<this.allRows.length;e+=1){var i=this.focusCell.key,n={rowData:this.focusCell.rowData,index:e,items:[{key:i,value:this.fxContent}]};t.push(n)}this.$emit("update",t)}else this.$emit("updateItem",{index:this.focusCell.rowIndex,key:this.focusCell.key,value:this.fxContent})},handleFxBlur:function(){this.fxFocus=!1,this.paintFocusCell(this.focusCell)},handleInputBlur:function(){},handleFxKeyup:function(t){13===t.keyCode&&0===this.fxContent.indexOf("=")&&this.evalExpression()},evalExpression:function(){try{var t=this.evalUtil(this.fxContent),e=!0,i=!1,n=void 0;try{for(var o,s=__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_get_iterator___default()(t);!(e=(o=s.next()).done);e=!0){var l=o.value;l.indexArray&&l.indexArray.length>0&&l.regionType?this.doEquation.apply(this,__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_toConsumableArray___default()(l)):this.doEquation(l.equation)}}catch(t){i=!0,n=t}finally{try{!e&&s.return&&s.return()}finally{if(i)throw n}}}catch(t){this.fxTip="非法表达式"}},doEquation:function doEquation(equation,indexs,type){if(indexs&&type){var modifyData=[];if("include"===type){this.fxContent=eval(equation.replace("$x$",indexs[0]));var _iteratorNormalCompletion11=!0,_didIteratorError11=!1,_iteratorError11=void 0;try{for(var _iterator11=__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_get_iterator___default()(indexs),_step11;!(_iteratorNormalCompletion11=(_step11=_iterator11.next()).done);_iteratorNormalCompletion11=!0){var i=_step11.value,key=this.focusCell.key,valueTemp=eval(equation.replace("$x$",i));"number"===this.focusCell.type&&(valueTemp=parseFloat(valueTemp.toFixed(2)));var temp={rowData:this.allCells[i][this.focusCell.cellIndex].rowData,index:i,items:[{key:key,value:valueTemp}]};modifyData.push(temp)}}catch(t){_didIteratorError11=!0,_iteratorError11=t}finally{try{!_iteratorNormalCompletion11&&_iterator11.return&&_iterator11.return()}finally{if(_didIteratorError11)throw _iteratorError11}}}else for(var isFirstIndex=!0,_i4=0;_i4<this.allRows.length;_i4+=1)if(-1===indexs.indexOf(_i4)){isFirstIndex&&(this.fxContent=eval(equation.replace("$x$",_i4))),isFirstIndex=!1;var _key=this.focusCell.key,_valueTemp=eval(equation.replace("$x$",_i4));"number"===this.focusCell.type&&(_valueTemp=parseFloat(_valueTemp.toFixed(2)));var _temp={rowData:this.allCells[_i4][this.focusCell.cellIndex].rowData,index:_i4,items:[{key:_key,value:_valueTemp}]};modifyData.push(_temp)}this.$emit("update",modifyData)}else if(this.multiSelect){var _modifyData=[];this.fxContent=eval(equation.replace("$x$",0));for(var _i5=0;_i5<this.allRows.length;_i5+=1){var _key2=this.focusCell.key,_valueTemp2=eval(equation.replace("$x$",_i5));"number"===this.focusCell.type&&(_valueTemp2=parseFloat(_valueTemp2.toFixed(2)));var _temp2={rowData:this.allCells[_i5][0].rowData,index:_i5,items:[{key:_key2,value:_valueTemp2}]};_modifyData.push(_temp2)}this.$emit("update",_modifyData)}else this.fxContent=eval(equation.replace("$x$",this.focusCell.rowIndex)),this.$emit("updateItem",{index:this.focusCell.rowIndex,key:this.focusCell.key,value:this.fxContent})},handleDoRegionExpress:function(){if(this.selectArea){var t=this.selectArea,e=t.rowIndex,i=t.rowCount;this.fxContent="=include("+(e+1)+"-"+(e+i)+")=>",this.focusFxInput(),this.selectArea=null,this.isSelect=!1,this.rePainted()}},focusFxInput:function(){var t=this;setTimeout(function(){t.$refs["fx-input"].focus()},0)}}}},t8SX:function(t,e,i){var n=i("SYhb");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i("rjj0")("50797c40",n,!0)},xk8O:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.js.map